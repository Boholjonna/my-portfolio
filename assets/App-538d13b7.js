import{r as w,j as A,a as p,_ as wt}from"./index-382cc4b1.js";var ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Da(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ia(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),s}var gr={exports:{}},La="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ma=La,Va=Ma;function yr(){}function vr(){}vr.resetWarningCache=yr;var $a=function(){function t(n,i,r,o,a,l){if(l!==Va){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:vr,resetWarningCache:yr};return s.PropTypes=s,s};gr.exports=$a();var Na=gr.exports;const R=Da(Na);R.string.isRequired,R.number,R.number;const br=w.createContext({});function Ua(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const tn=typeof window<"u",Ba=tn?w.useLayoutEffect:w.useEffect,sn=w.createContext(null);function nn(t,e){t.indexOf(e)===-1&&t.push(e)}function rn(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const ue=(t,e,s)=>s>e?e:s<t?t:s;let on=()=>{};const he={},wr=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function _r(t){return typeof t=="object"&&t!==null}const Tr=t=>/^0[^.\s]+$/u.test(t);function an(t){let e;return()=>(e===void 0&&(e=t()),e)}const Q=t=>t,Fa=(t,e)=>s=>e(t(s)),_t=(...t)=>t.reduce(Fa),dt=(t,e,s)=>{const n=e-t;return n===0?1:(s-t)/n};class ln{constructor(){this.subscriptions=[]}add(e){return nn(this.subscriptions,e),()=>rn(this.subscriptions,e)}notify(e,s,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,s,n);else for(let r=0;r<i;r++){const o=this.subscriptions[r];o&&o(e,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ie=t=>t*1e3,re=t=>t/1e3;function Sr(t,e){return e?t*(1e3/e):0}const xr=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,qa=1e-7,Ka=12;function Wa(t,e,s,n,i){let r,o,a=0;do o=e+(s-e)/2,r=xr(o,n,i)-t,r>0?s=o:e=o;while(Math.abs(r)>qa&&++a<Ka);return o}function Tt(t,e,s,n){if(t===e&&s===n)return Q;const i=r=>Wa(r,0,1,t,s);return r=>r===0||r===1?r:xr(i(r),e,n)}const kr=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Pr=t=>e=>1-t(1-e),Ar=Tt(.33,1.53,.69,.99),cn=Pr(Ar),Er=kr(cn),Cr=t=>(t*=2)<1?.5*cn(t):.5*(2-Math.pow(2,-10*(t-1))),un=t=>1-Math.sin(Math.acos(t)),jr=Pr(un),Rr=kr(un),za=Tt(.42,0,1,1),Ha=Tt(0,0,.58,1),Or=Tt(.42,0,.58,1),Ga=t=>Array.isArray(t)&&typeof t[0]!="number",Dr=t=>Array.isArray(t)&&typeof t[0]=="number",Ja={linear:Q,easeIn:za,easeInOut:Or,easeOut:Ha,circIn:un,circInOut:Rr,circOut:jr,backIn:cn,backInOut:Er,backOut:Ar,anticipate:Cr},Ya=t=>typeof t=="string",Bn=t=>{if(Dr(t)){on(t.length===4);const[e,s,n,i]=t;return Tt(e,s,n,i)}else if(Ya(t))return Ja[t];return t},Ct=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Fn={value:null,addProjectionMetrics:null};function Xa(t,e){let s=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function u(h){o.has(h)&&(c.schedule(h),t()),l++,h(a)}const c={schedule:(h,d=!1,f=!1)=>{const y=f&&i?s:n;return d&&o.add(h),y.has(h)||y.add(h),h},cancel:h=>{n.delete(h),o.delete(h)},process:h=>{if(a=h,i){r=!0;return}i=!0,[s,n]=[n,s],s.forEach(u),e&&Fn.value&&Fn.value.frameloop[e].push(l),l=0,s.clear(),i=!1,r&&(r=!1,c.process(h))}};return c}const Za=40;function Ir(t,e){let s=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>s=!0,o=Ct.reduce((g,x)=>(g[x]=Xa(r,e?x:void 0),g),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:h,preRender:d,render:f,postRender:m}=o,y=()=>{const g=he.useManualTiming?i.timestamp:performance.now();s=!1,he.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(g-i.timestamp,Za),1)),i.timestamp=g,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),h.process(i),d.process(i),f.process(i),m.process(i),i.isProcessing=!1,s&&e&&(n=!1,t(y))},v=()=>{s=!0,n=!0,i.isProcessing||t(y)};return{schedule:Ct.reduce((g,x)=>{const T=o[x];return g[x]=(S,P=!1,k=!1)=>(s||v(),T.schedule(S,P,k)),g},{}),cancel:g=>{for(let x=0;x<Ct.length;x++)o[Ct[x]].cancel(g)},state:i,steps:o}}const{schedule:I,cancel:ye,state:F,steps:rs}=Ir(typeof requestAnimationFrame<"u"?requestAnimationFrame:Q,!0);let Lt;function Qa(){Lt=void 0}const J={now:()=>(Lt===void 0&&J.set(F.isProcessing||he.useManualTiming?F.timestamp:performance.now()),Lt),set:t=>{Lt=t,queueMicrotask(Qa)}},Lr=t=>e=>typeof e=="string"&&e.startsWith(t),hn=Lr("--"),el=Lr("var(--"),dn=t=>el(t)?tl.test(t.split("/*")[0].trim()):!1,tl=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ye={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ft={...Ye,transform:t=>ue(0,1,t)},jt={...Ye,default:1},rt=t=>Math.round(t*1e5)/1e5,fn=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function sl(t){return t==null}const nl=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pn=(t,e)=>s=>!!(typeof s=="string"&&nl.test(s)&&s.startsWith(t)||e&&!sl(s)&&Object.prototype.hasOwnProperty.call(s,e)),Mr=(t,e,s)=>n=>{if(typeof n!="string")return n;const[i,r,o,a]=n.match(fn);return{[t]:parseFloat(i),[e]:parseFloat(r),[s]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},il=t=>ue(0,255,t),os={...Ye,transform:t=>Math.round(il(t))},je={test:pn("rgb","red"),parse:Mr("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:n=1})=>"rgba("+os.transform(t)+", "+os.transform(e)+", "+os.transform(s)+", "+rt(ft.transform(n))+")"};function rl(t){let e="",s="",n="",i="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,s+=s,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Ps={test:pn("#"),parse:rl,transform:je.transform},St=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),fe=St("deg"),oe=St("%"),E=St("px"),ol=St("vh"),al=St("vw"),qn=(()=>({...oe,parse:t=>oe.parse(t)/100,transform:t=>oe.transform(t*100)}))(),Fe={test:pn("hsl","hue"),parse:Mr("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:n=1})=>"hsla("+Math.round(t)+", "+oe.transform(rt(e))+", "+oe.transform(rt(s))+", "+rt(ft.transform(n))+")"},$={test:t=>je.test(t)||Ps.test(t)||Fe.test(t),parse:t=>je.test(t)?je.parse(t):Fe.test(t)?Fe.parse(t):Ps.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?je.transform(t):Fe.transform(t),getAnimatableNone:t=>{const e=$.parse(t);return e.alpha=0,$.transform(e)}},ll=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function cl(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(fn))==null?void 0:e.length)||0)+(((s=t.match(ll))==null?void 0:s.length)||0)>0}const Vr="number",$r="color",ul="var",hl="var(",Kn="${}",dl=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pt(t){const e=t.toString(),s=[],n={color:[],number:[],var:[]},i=[];let r=0;const a=e.replace(dl,l=>($.test(l)?(n.color.push(r),i.push($r),s.push($.parse(l))):l.startsWith(hl)?(n.var.push(r),i.push(ul),s.push(l)):(n.number.push(r),i.push(Vr),s.push(parseFloat(l))),++r,Kn)).split(Kn);return{values:s,split:a,indexes:n,types:i}}function Nr(t){return pt(t).values}function Ur(t){const{split:e,types:s}=pt(t),n=e.length;return i=>{let r="";for(let o=0;o<n;o++)if(r+=e[o],i[o]!==void 0){const a=s[o];a===Vr?r+=rt(i[o]):a===$r?r+=$.transform(i[o]):r+=i[o]}return r}}const fl=t=>typeof t=="number"?0:$.test(t)?$.getAnimatableNone(t):t;function pl(t){const e=Nr(t);return Ur(t)(e.map(fl))}const ve={test:cl,parse:Nr,createTransformer:Ur,getAnimatableNone:pl};function as(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function ml({hue:t,saturation:e,lightness:s,alpha:n}){t/=360,e/=100,s/=100;let i=0,r=0,o=0;if(!e)i=r=o=s;else{const a=s<.5?s*(1+e):s+e-s*e,l=2*s-a;i=as(l,a,t+1/3),r=as(l,a,t),o=as(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:n}}function Ut(t,e){return s=>s>0?e:t}const D=(t,e,s)=>t+(e-t)*s,ls=(t,e,s)=>{const n=t*t,i=s*(e*e-n)+n;return i<0?0:Math.sqrt(i)},gl=[Ps,je,Fe],yl=t=>gl.find(e=>e.test(t));function Wn(t){const e=yl(t);if(!e)return!1;let s=e.parse(t);return e===Fe&&(s=ml(s)),s}const zn=(t,e)=>{const s=Wn(t),n=Wn(e);if(!s||!n)return Ut(t,e);const i={...s};return r=>(i.red=ls(s.red,n.red,r),i.green=ls(s.green,n.green,r),i.blue=ls(s.blue,n.blue,r),i.alpha=D(s.alpha,n.alpha,r),je.transform(i))},As=new Set(["none","hidden"]);function vl(t,e){return As.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function bl(t,e){return s=>D(t,e,s)}function mn(t){return typeof t=="number"?bl:typeof t=="string"?dn(t)?Ut:$.test(t)?zn:Tl:Array.isArray(t)?Br:typeof t=="object"?$.test(t)?zn:wl:Ut}function Br(t,e){const s=[...t],n=s.length,i=t.map((r,o)=>mn(r)(r,e[o]));return r=>{for(let o=0;o<n;o++)s[o]=i[o](r);return s}}function wl(t,e){const s={...t,...e},n={};for(const i in s)t[i]!==void 0&&e[i]!==void 0&&(n[i]=mn(t[i])(t[i],e[i]));return i=>{for(const r in n)s[r]=n[r](i);return s}}function _l(t,e){const s=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const r=e.types[i],o=t.indexes[r][n[r]],a=t.values[o]??0;s[i]=a,n[r]++}return s}const Tl=(t,e)=>{const s=ve.createTransformer(e),n=pt(t),i=pt(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?As.has(t)&&!i.values.length||As.has(e)&&!n.values.length?vl(t,e):_t(Br(_l(n,i),i.values),s):Ut(t,e)};function Fr(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?D(t,e,s):mn(t)(t,e)}const Sl=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>I.update(e,s),stop:()=>ye(e),now:()=>F.isProcessing?F.timestamp:J.now()}},qr=(t,e,s=10)=>{let n="";const i=Math.max(Math.round(e/s),2);for(let r=0;r<i;r++)n+=Math.round(t(r/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Bt=2e4;function gn(t){let e=0;const s=50;let n=t.next(e);for(;!n.done&&e<Bt;)e+=s,n=t.next(e);return e>=Bt?1/0:e}function xl(t,e=100,s){const n=s({...t,keyframes:[0,e]}),i=Math.min(gn(n),Bt);return{type:"keyframes",ease:r=>n.next(i*r).value/e,duration:re(i)}}const kl=5;function Kr(t,e,s){const n=Math.max(e-kl,0);return Sr(s-t(n),e-n)}const M={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},cs=.001;function Pl({duration:t=M.duration,bounce:e=M.bounce,velocity:s=M.velocity,mass:n=M.mass}){let i,r,o=1-e;o=ue(M.minDamping,M.maxDamping,o),t=ue(M.minDuration,M.maxDuration,re(t)),o<1?(i=u=>{const c=u*o,h=c*t,d=c-s,f=Es(u,o),m=Math.exp(-h);return cs-d/f*m},r=u=>{const h=u*o*t,d=h*s+s,f=Math.pow(o,2)*Math.pow(u,2)*t,m=Math.exp(-h),y=Es(Math.pow(u,2),o);return(-i(u)+cs>0?-1:1)*((d-f)*m)/y}):(i=u=>{const c=Math.exp(-u*t),h=(u-s)*t+1;return-cs+c*h},r=u=>{const c=Math.exp(-u*t),h=(s-u)*(t*t);return c*h});const a=5/t,l=El(i,r,a);if(t=ie(t),isNaN(l))return{stiffness:M.stiffness,damping:M.damping,duration:t};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:t}}}const Al=12;function El(t,e,s){let n=s;for(let i=1;i<Al;i++)n=n-t(n)/e(n);return n}function Es(t,e){return t*Math.sqrt(1-e*e)}const Cl=["duration","bounce"],jl=["stiffness","damping","mass"];function Hn(t,e){return e.some(s=>t[s]!==void 0)}function Rl(t){let e={velocity:M.velocity,stiffness:M.stiffness,damping:M.damping,mass:M.mass,isResolvedFromDuration:!1,...t};if(!Hn(t,jl)&&Hn(t,Cl))if(t.visualDuration){const s=t.visualDuration,n=2*Math.PI/(s*1.2),i=n*n,r=2*ue(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:M.mass,stiffness:i,damping:r}}else{const s=Pl(t);e={...e,...s,mass:M.mass},e.isResolvedFromDuration=!0}return e}function Ft(t=M.visualDuration,e=M.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:i}=s;const r=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:u,mass:c,duration:h,velocity:d,isResolvedFromDuration:f}=Rl({...s,velocity:-re(s.velocity||0)}),m=d||0,y=u/(2*Math.sqrt(l*c)),v=o-r,b=re(Math.sqrt(l/c)),_=Math.abs(v)<5;n||(n=_?M.restSpeed.granular:M.restSpeed.default),i||(i=_?M.restDelta.granular:M.restDelta.default);let g;if(y<1){const T=Es(b,y);g=S=>{const P=Math.exp(-y*b*S);return o-P*((m+y*b*v)/T*Math.sin(T*S)+v*Math.cos(T*S))}}else if(y===1)g=T=>o-Math.exp(-b*T)*(v+(m+b*v)*T);else{const T=b*Math.sqrt(y*y-1);g=S=>{const P=Math.exp(-y*b*S),k=Math.min(T*S,300);return o-P*((m+y*b*v)*Math.sinh(k)+T*v*Math.cosh(k))/T}}const x={calculatedDuration:f&&h||null,next:T=>{const S=g(T);if(f)a.done=T>=h;else{let P=T===0?m:0;y<1&&(P=T===0?ie(m):Kr(g,T,S));const k=Math.abs(P)<=n,L=Math.abs(o-S)<=i;a.done=k&&L}return a.value=a.done?o:S,a},toString:()=>{const T=Math.min(gn(x),Bt),S=qr(P=>x.next(T*P).value,T,30);return T+"ms "+S},toTransition:()=>{}};return x}Ft.applyToOptions=t=>{const e=xl(t,100,Ft);return t.ease=e.ease,t.duration=ie(e.duration),t.type="keyframes",t};function Cs({keyframes:t,velocity:e=0,power:s=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const h=t[0],d={done:!1,value:h},f=k=>a!==void 0&&k<a||l!==void 0&&k>l,m=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let y=s*e;const v=h+y,b=o===void 0?v:o(v);b!==v&&(y=b-h);const _=k=>-y*Math.exp(-k/n),g=k=>b+_(k),x=k=>{const L=_(k),N=g(k);d.done=Math.abs(L)<=u,d.value=d.done?b:N};let T,S;const P=k=>{f(d.value)&&(T=k,S=Ft({keyframes:[d.value,m(d.value)],velocity:Kr(g,k,d.value),damping:i,stiffness:r,restDelta:u,restSpeed:c}))};return P(0),{calculatedDuration:null,next:k=>{let L=!1;return!S&&T===void 0&&(L=!0,x(k),P(k)),T!==void 0&&k>=T?S.next(k-T):(!L&&x(k),d)}}}function Ol(t,e,s){const n=[],i=s||he.mix||Fr,r=t.length-1;for(let o=0;o<r;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Q:e;a=_t(l,a)}n.push(a)}return n}function Dl(t,e,{clamp:s=!0,ease:n,mixer:i}={}){const r=t.length;if(on(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Ol(e,n,i),l=a.length,u=c=>{if(o&&c<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const d=dt(t[h],t[h+1],c);return a[h](d)};return s?c=>u(ue(t[0],t[r-1],c)):u}function Il(t,e){const s=t[t.length-1];for(let n=1;n<=e;n++){const i=dt(0,e,n);t.push(D(s,1,i))}}function Ll(t){const e=[0];return Il(e,t.length-1),e}function Ml(t,e){return t.map(s=>s*e)}function Vl(t,e){return t.map(()=>e||Or).splice(0,t.length-1)}function ot({duration:t=300,keyframes:e,times:s,ease:n="easeInOut"}){const i=Ga(n)?n.map(Bn):Bn(n),r={done:!1,value:e[0]},o=Ml(s&&s.length===e.length?s:Ll(e),t),a=Dl(o,e,{ease:Array.isArray(i)?i:Vl(e,i)});return{calculatedDuration:t,next:l=>(r.value=a(l),r.done=l>=t,r)}}const $l=t=>t!==null;function yn(t,{repeat:e,repeatType:s="loop"},n,i=1){const r=t.filter($l),a=i<0||e&&s!=="loop"&&e%2===1?0:r.length-1;return!a||n===void 0?r[a]:n}const Nl={decay:Cs,inertia:Cs,tween:ot,keyframes:ot,spring:Ft};function Wr(t){typeof t.type=="string"&&(t.type=Nl[t.type])}class vn{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const Ul=t=>t/100;class bn extends vn{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,i;const{motionValue:s}=this.options;s&&s.updatedAt!==J.now()&&this.tick(J.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(n=this.options).onStop)==null||i.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Wr(e);const{type:s=ot,repeat:n=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=e;let{keyframes:a}=e;const l=s||ot;l!==ot&&typeof a[0]!="number"&&(this.mixKeyframes=_t(Ul,Fr(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});r==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=gn(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=u}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:n,totalDuration:i,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:c,repeat:h,repeatType:d,repeatDelay:f,type:m,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const b=this.currentTime-u*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?b<0:b>i;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let g=this.currentTime,x=n;if(h){const k=Math.min(this.currentTime,i)/a;let L=Math.floor(k),N=k%1;!N&&k>=1&&(N=1),N===1&&L--,L=Math.min(L,h+1),!!(L%2)&&(d==="reverse"?(N=1-N,f&&(N-=f/a)):d==="mirror"&&(x=o)),g=ue(0,1,N)*a}const T=_?{done:!1,value:c[0]}:x.next(g);r&&(T.value=r(T.value));let{done:S}=T;!_&&l!==null&&(S=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return P&&m!==Cs&&(T.value=yn(c,this.options,v,this.speed)),y&&y(T.value),P&&this.finish(),T}then(e,s){return this.finished.then(e,s)}get duration(){return re(this.calculatedDuration)}get time(){return re(this.currentTime)}set time(e){var s;e=ie(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(J.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=re(this.currentTime))}play(){var i,r;if(this.isStopped)return;const{driver:e=Sl,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(r=(i=this.options).onPlay)==null||r.call(i);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=s??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(J.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(e=this.options).onComplete)==null||s.call(e)}cancel(){var e,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(e=this.options).onCancel)==null||s.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),e.observe(this)}}function Bl(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Re=t=>t*180/Math.PI,js=t=>{const e=Re(Math.atan2(t[1],t[0]));return Rs(e)},Fl={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:js,rotateZ:js,skewX:t=>Re(Math.atan(t[1])),skewY:t=>Re(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Rs=t=>(t=t%360,t<0&&(t+=360),t),Gn=js,Jn=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Yn=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),ql={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Jn,scaleY:Yn,scale:t=>(Jn(t)+Yn(t))/2,rotateX:t=>Rs(Re(Math.atan2(t[6],t[5]))),rotateY:t=>Rs(Re(Math.atan2(-t[2],t[0]))),rotateZ:Gn,rotate:Gn,skewX:t=>Re(Math.atan(t[4])),skewY:t=>Re(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Os(t){return t.includes("scale")?1:0}function Ds(t,e){if(!t||t==="none")return Os(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(s)n=ql,i=s;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Fl,i=a}if(!i)return Os(e);const r=n[e],o=i[1].split(",").map(Wl);return typeof r=="function"?r(o):o[r]}const Kl=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return Ds(s,e)};function Wl(t){return parseFloat(t.trim())}const Xe=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ze=(()=>new Set(Xe))(),Xn=t=>t===Ye||t===E,zl=new Set(["x","y","z"]),Hl=Xe.filter(t=>!zl.has(t));function Gl(t){const e=[];return Hl.forEach(s=>{const n=t.getValue(s);n!==void 0&&(e.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),e}const Oe={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ds(e,"x"),y:(t,{transform:e})=>Ds(e,"y")};Oe.translateX=Oe.x;Oe.translateY=Oe.y;const De=new Set;let Is=!1,Ls=!1,Ms=!1;function zr(){if(Ls){const t=Array.from(De).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),s=new Map;e.forEach(n=>{const i=Gl(n);i.length&&(s.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=s.get(n);i&&i.forEach(([r,o])=>{var a;(a=n.getValue(r))==null||a.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Ls=!1,Is=!1,De.forEach(t=>t.complete(Ms)),De.clear()}function Hr(){De.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ls=!0)})}function Jl(){Ms=!0,Hr(),zr(),Ms=!1}class wn{constructor(e,s,n,i,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=n,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(De.add(this),Is||(Is=!0,I.read(Hr),I.resolveKeyframes(zr))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:n,motionValue:i}=this;if(e[0]===null){const r=i==null?void 0:i.get(),o=e[e.length-1];if(r!==void 0)e[0]=r;else if(n&&s){const a=n.readValue(s,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&r===void 0&&i.set(e[0])}Bl(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),De.delete(this)}cancel(){this.state==="scheduled"&&(De.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Yl=t=>t.startsWith("--");function Xl(t,e,s){Yl(e)?t.style.setProperty(e,s):t.style[e]=s}const Zl=an(()=>window.ScrollTimeline!==void 0),Ql={};function ec(t,e){const s=an(t);return()=>Ql[e]??s()}const Gr=ec(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),nt=([t,e,s,n])=>`cubic-bezier(${t}, ${e}, ${s}, ${n})`,Zn={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nt([0,.65,.55,1]),circOut:nt([.55,0,1,.45]),backIn:nt([.31,.01,.66,-.59]),backOut:nt([.33,1.53,.69,.99])};function Jr(t,e){if(t)return typeof t=="function"?Gr()?qr(t,e):"ease-out":Dr(t)?nt(t):Array.isArray(t)?t.map(s=>Jr(s,e)||Zn.easeOut):Zn[t]}function tc(t,e,s,{delay:n=0,duration:i=300,repeat:r=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[e]:s};l&&(c.offset=l);const h=Jr(a,i);Array.isArray(h)&&(c.easing=h);const d={delay:n,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return u&&(d.pseudoElement=u),t.animate(c,d)}function Yr(t){return typeof t=="function"&&"applyToOptions"in t}function sc({type:t,...e}){return Yr(t)&&Gr()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class nc extends vn{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:n,keyframes:i,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=e,on(typeof e.type!="string");const u=sc(e);this.animation=tc(s,n,i,u,r),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const c=yn(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):Xl(s,n,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,s;(s=(e=this.animation).finish)==null||s.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,s;this.isPseudoElement||(s=(e=this.animation).commitStyles)==null||s.call(e)}get duration(){var s,n;const e=((n=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:n.call(s).duration)||0;return re(Number(e))}get time(){return re(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ie(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Zl()?(this.animation.timeline=e,Q):s(this)}}const Xr={anticipate:Cr,backInOut:Er,circInOut:Rr};function ic(t){return t in Xr}function rc(t){typeof t.ease=="string"&&ic(t.ease)&&(t.ease=Xr[t.ease])}const Qn=10;class oc extends nc{constructor(e){rc(e),Wr(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:n,onComplete:i,element:r,...o}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const a=new bn({...o,autoplay:!1}),l=ie(this.finishedTime??this.time);s.setWithVelocity(a.sample(l-Qn).value,a.sample(l).value,Qn),a.stop()}}const ei=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ve.test(t)||t==="0")&&!t.startsWith("url("));function ac(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function lc(t,e,s,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],o=ei(i,e),a=ei(r,e);return!o||!a?!1:ac(t)||(s==="spring"||Yr(s))&&n}function Zr(t){return _r(t)&&"offsetHeight"in t}const cc=new Set(["opacity","clipPath","filter","transform"]),uc=an(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hc(t){var u;const{motionValue:e,name:s,repeatDelay:n,repeatType:i,damping:r,type:o}=t;if(!Zr((u=e==null?void 0:e.owner)==null?void 0:u.current))return!1;const{onUpdate:a,transformTemplate:l}=e.owner.getProps();return uc()&&s&&cc.has(s)&&(s!=="transform"||!l)&&!a&&!n&&i!=="mirror"&&r!==0&&o!=="inertia"}const dc=40;class fc extends vn{constructor({autoplay:e=!0,delay:s=0,type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...h}){var m;super(),this.stop=()=>{var y,v;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=J.now();const d={autoplay:e,delay:s,type:n,repeat:i,repeatDelay:r,repeatType:o,name:l,motionValue:u,element:c,...h},f=(c==null?void 0:c.KeyframeResolver)||wn;this.keyframeResolver=new f(a,(y,v,b)=>this.onKeyframesResolved(y,v,d,!b),l,u,c),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(e,s,n,i){this.keyframeResolver=void 0;const{name:r,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=n;this.resolvedAt=J.now(),lc(e,r,o,a)||((he.instantAnimations||!l)&&(c==null||c(yn(e,n,s))),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const d={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>dc?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...n,keyframes:e},f=!u&&hc(d)?new oc({...d,element:d.motionValue.owner.current}):new bn(d);f.finished.then(()=>this.notifyFinished()).catch(Q),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Jl()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const pc=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mc(t){const e=pc.exec(t);if(!e)return[,];const[,s,n,i]=e;return[`--${s??n}`,i]}function Qr(t,e,s=1){const[n,i]=mc(t);if(!n)return;const r=window.getComputedStyle(e).getPropertyValue(n);if(r){const o=r.trim();return wr(o)?parseFloat(o):o}return dn(i)?Qr(i,e,s+1):i}function _n(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const eo=new Set(["width","height","top","left","right","bottom",...Xe]),gc={test:t=>t==="auto",parse:t=>t},to=t=>e=>e.test(t),so=[Ye,E,oe,fe,al,ol,gc],ti=t=>so.find(to(t));function yc(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Tr(t):!0}const vc=new Set(["brightness","contrast","saturate","opacity"]);function bc(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=s.match(fn)||[];if(!n)return t;const i=s.replace(n,"");let r=vc.has(e)?1:0;return n!==s&&(r*=100),e+"("+r+i+")"}const wc=/\b([a-z-]*)\(.*?\)/gu,Vs={...ve,getAnimatableNone:t=>{const e=t.match(wc);return e?e.map(bc).join(" "):t}},si={...Ye,transform:Math.round},_c={rotate:fe,rotateX:fe,rotateY:fe,rotateZ:fe,scale:jt,scaleX:jt,scaleY:jt,scaleZ:jt,skew:fe,skewX:fe,skewY:fe,distance:E,translateX:E,translateY:E,translateZ:E,x:E,y:E,z:E,perspective:E,transformPerspective:E,opacity:ft,originX:qn,originY:qn,originZ:E},Tn={borderWidth:E,borderTopWidth:E,borderRightWidth:E,borderBottomWidth:E,borderLeftWidth:E,borderRadius:E,radius:E,borderTopLeftRadius:E,borderTopRightRadius:E,borderBottomRightRadius:E,borderBottomLeftRadius:E,width:E,maxWidth:E,height:E,maxHeight:E,top:E,right:E,bottom:E,left:E,padding:E,paddingTop:E,paddingRight:E,paddingBottom:E,paddingLeft:E,margin:E,marginTop:E,marginRight:E,marginBottom:E,marginLeft:E,backgroundPositionX:E,backgroundPositionY:E,..._c,zIndex:si,fillOpacity:ft,strokeOpacity:ft,numOctaves:si},Tc={...Tn,color:$,backgroundColor:$,outlineColor:$,fill:$,stroke:$,borderColor:$,borderTopColor:$,borderRightColor:$,borderBottomColor:$,borderLeftColor:$,filter:Vs,WebkitFilter:Vs},no=t=>Tc[t];function io(t,e){let s=no(t);return s!==Vs&&(s=ve),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const Sc=new Set(["auto","none","0"]);function xc(t,e,s){let n=0,i;for(;n<t.length&&!i;){const r=t[n];typeof r=="string"&&!Sc.has(r)&&pt(r).values.length&&(i=t[n]),n++}if(i&&s)for(const r of e)t[r]=io(s,i)}class kc extends wn{constructor(e,s,n,i,r){super(e,s,n,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),dn(u))){const c=Qr(u,s.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!eo.has(n)||e.length!==2)return;const[i,r]=e,o=ti(i),a=ti(r);if(o!==a)if(Xn(o)&&Xn(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else Oe[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,n=[];for(let i=0;i<e.length;i++)(e[i]===null||yc(e[i]))&&n.push(i);n.length&&xc(e,n,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Oe[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:s,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(s);i&&i.jump(this.measuredOrigin,!1);const r=n.length-1,o=n[r];n[r]=Oe[s](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Pc(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;e&&(n=e.current);const i=(s==null?void 0:s[t])??n.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const ro=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ni=30,Ac=t=>!isNaN(parseFloat(t));class Ec{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{var o,a;const r=J.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=J.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ac(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new ln);const n=this.events[e].add(s);return e==="change"?()=>{n(),I.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=J.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ni)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,ni);return Sr(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,s;(e=this.dependents)==null||e.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function He(t,e){return new Ec(t,e)}const{schedule:Sn,cancel:om}=Ir(queueMicrotask,!1),se={x:!1,y:!1};function oo(){return se.x||se.y}function Cc(t){return t==="x"||t==="y"?se[t]?null:(se[t]=!0,()=>{se[t]=!1}):se.x||se.y?null:(se.x=se.y=!0,()=>{se.x=se.y=!1})}function ao(t,e){const s=Pc(t),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[s,i,()=>n.abort()]}function ii(t){return!(t.pointerType==="touch"||oo())}function jc(t,e,s={}){const[n,i,r]=ao(t,s),o=a=>{if(!ii(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const c=h=>{ii(h)&&(u(h),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return n.forEach(a=>{a.addEventListener("pointerenter",o,i)}),r}const lo=(t,e)=>e?t===e?!0:lo(t,e.parentElement):!1,xn=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Rc=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Oc(t){return Rc.has(t.tagName)||t.tabIndex!==-1}const Mt=new WeakSet;function ri(t){return e=>{e.key==="Enter"&&t(e)}}function us(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Dc=(t,e)=>{const s=t.currentTarget;if(!s)return;const n=ri(()=>{if(Mt.has(s))return;us(s,"down");const i=ri(()=>{us(s,"up")}),r=()=>us(s,"cancel");s.addEventListener("keyup",i,e),s.addEventListener("blur",r,e)});s.addEventListener("keydown",n,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),e)};function oi(t){return xn(t)&&!oo()}function Ic(t,e,s={}){const[n,i,r]=ao(t,s),o=a=>{const l=a.currentTarget;if(!oi(a))return;Mt.add(l);const u=e(l,a),c=(f,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",d),Mt.has(l)&&Mt.delete(l),oi(f)&&typeof u=="function"&&u(f,{success:m})},h=f=>{c(f,l===window||l===document||s.useGlobalTarget||lo(l,f.target))},d=f=>{c(f,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",d,i)};return n.forEach(a=>{(s.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),Zr(a)&&(a.addEventListener("focus",u=>Dc(u,i)),!Oc(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),r}function co(t){return _r(t)&&"ownerSVGElement"in t}function Lc(t){return co(t)&&t.tagName==="svg"}const W=t=>!!(t&&t.getVelocity),Mc=[...so,$,ve],Vc=t=>Mc.find(to(t)),uo=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function $c(t=!0){const e=w.useContext(sn);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:i}=e,r=w.useId();w.useEffect(()=>{if(t)return i(r)},[t]);const o=w.useCallback(()=>t&&n&&n(r),[r,n,t]);return!s&&n?[!1,o]:[!0]}const ho=w.createContext({strict:!1}),ai={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ge={};for(const t in ai)Ge[t]={isEnabled:e=>ai[t].some(s=>!!e[s])};function Nc(t){for(const e in t)Ge[e]={...Ge[e],...t[e]}}const Uc=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qt(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Uc.has(t)}let fo=t=>!qt(t);function Bc(t){typeof t=="function"&&(fo=e=>e.startsWith("on")?!qt(e):t(e))}try{Bc(require("@emotion/is-prop-valid").default)}catch{}function Fc(t,e,s){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(fo(i)||s===!0&&qt(i)||!e&&!qt(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}function qc(t){if(typeof Proxy>"u")return t;const e=new Map,s=(...n)=>t(...n);return new Proxy(s,{get:(n,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Ht=w.createContext({});function Gt(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function mt(t){return typeof t=="string"||Array.isArray(t)}const kn=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Pn=["initial",...kn];function Jt(t){return Gt(t.animate)||Pn.some(e=>mt(t[e]))}function po(t){return!!(Jt(t)||t.variants)}function Kc(t,e){if(Jt(t)){const{initial:s,animate:n}=t;return{initial:s===!1||mt(s)?s:void 0,animate:mt(n)?n:void 0}}return t.inherit!==!1?e:{}}function Wc(t){const{initial:e,animate:s}=Kc(t,w.useContext(Ht));return w.useMemo(()=>({initial:e,animate:s}),[li(e),li(s)])}function li(t){return Array.isArray(t)?t.join(" "):t}const zc=Symbol.for("motionComponentSymbol");function qe(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Hc(t,e,s){return w.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),s&&(typeof s=="function"?s(n):qe(s)&&(s.current=n))},[e])}const An=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Gc="framerAppearId",mo="data-"+An(Gc),go=w.createContext({});function Jc(t,e,s,n,i){var y,v;const{visualElement:r}=w.useContext(Ht),o=w.useContext(ho),a=w.useContext(sn),l=w.useContext(uo).reducedMotion,u=w.useRef(null);n=n||o.renderer,!u.current&&n&&(u.current=n(t,{visualState:e,parent:r,props:s,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,h=w.useContext(go);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&Yc(u.current,s,i,h);const d=w.useRef(!1);w.useInsertionEffect(()=>{c&&d.current&&c.update(s,a)});const f=s[mo],m=w.useRef(!!f&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,f))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,f)));return Ba(()=>{c&&(d.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),Sn.render(c.render),m.current&&c.animationState&&c.animationState.animateChanges())}),w.useEffect(()=>{c&&(!m.current&&c.animationState&&c.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,f)}),m.current=!1))}),c}function Yc(t,e,s,n){const{layoutId:i,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:yo(t.parent)),t.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!o||a&&qe(a),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,crossfade:c,layoutScroll:l,layoutRoot:u})}function yo(t){if(t)return t.options.allowProjection!==!1?t.projection:yo(t.parent)}function Xc({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:n,Component:i}){t&&Nc(t);function r(a,l){let u;const c={...w.useContext(uo),...a,layoutId:Zc(a)},{isStatic:h}=c,d=Wc(a),f=n(a,h);if(!h&&tn){Qc();const m=eu(c);u=m.MeasureLayout,d.visualElement=Jc(i,f,c,e,m.ProjectionNode)}return A(Ht.Provider,{value:d,children:[u&&d.visualElement?p(u,{visualElement:d.visualElement,...c}):null,s(i,a,Hc(f,d.visualElement,l),f,h,d.visualElement)]})}r.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=w.forwardRef(r);return o[zc]=i,o}function Zc({layoutId:t}){const e=w.useContext(br).id;return e&&t!==void 0?e+"-"+t:t}function Qc(t,e){w.useContext(ho).strict}function eu(t){const{drag:e,layout:s}=Ge;if(!e&&!s)return{};const n={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const gt={};function tu(t){for(const e in t)gt[e]=t[e],hn(e)&&(gt[e].isCSSVariable=!0)}function vo(t,{layout:e,layoutId:s}){return Ze.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!gt[t]||t==="opacity")}const su={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nu=Xe.length;function iu(t,e,s){let n="",i=!0;for(let r=0;r<nu;r++){const o=Xe[r],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||s){const u=ro(a,Tn[o]);if(!l){i=!1;const c=su[o]||o;n+=`${c}(${u}) `}s&&(e[o]=u)}}return n=n.trim(),s?n=s(e,i?"":n):i&&(n="none"),n}function En(t,e,s){const{style:n,vars:i,transformOrigin:r}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(Ze.has(l)){o=!0;continue}else if(hn(l)){i[l]=u;continue}else{const c=ro(u,Tn[l]);l.startsWith("origin")?(a=!0,r[l]=c):n[l]=c}}if(e.transform||(o||s?n.transform=iu(e,t.transform,s):n.transform&&(n.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=r;n.transformOrigin=`${l} ${u} ${c}`}}const Cn=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bo(t,e,s){for(const n in e)!W(e[n])&&!vo(n,s)&&(t[n]=e[n])}function ru({transformTemplate:t},e){return w.useMemo(()=>{const s=Cn();return En(s,e,t),Object.assign({},s.vars,s.style)},[e])}function ou(t,e){const s=t.style||{},n={};return bo(n,s,t),Object.assign(n,ru(t,e)),n}function au(t,e){const s={},n=ou(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=n,s}const lu={offset:"stroke-dashoffset",array:"stroke-dasharray"},cu={offset:"strokeDashoffset",array:"strokeDasharray"};function uu(t,e,s=1,n=0,i=!0){t.pathLength=1;const r=i?lu:cu;t[r.offset]=E.transform(-n);const o=E.transform(e),a=E.transform(s);t[r.array]=`${o} ${a}`}function wo(t,{attrX:e,attrY:s,attrScale:n,pathLength:i,pathSpacing:r=1,pathOffset:o=0,...a},l,u,c){if(En(t,a,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:d}=t;h.transform&&(d.transform=h.transform,delete h.transform),(d.transform||h.transformOrigin)&&(d.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),d.transform&&(d.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),s!==void 0&&(h.y=s),n!==void 0&&(h.scale=n),i!==void 0&&uu(h,i,r,o,!1)}const _o=()=>({...Cn(),attrs:{}}),To=t=>typeof t=="string"&&t.toLowerCase()==="svg";function hu(t,e,s,n){const i=w.useMemo(()=>{const r=_o();return wo(r,e,To(n),t.transformTemplate,t.style),{...r.attrs,style:{...r.style}}},[e]);if(t.style){const r={};bo(r,t.style,t),i.style={...r,...i.style}}return i}const du=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jn(t){return typeof t!="string"||t.includes("-")?!1:!!(du.indexOf(t)>-1||/[A-Z]/u.test(t))}function fu(t=!1){return(s,n,i,{latestValues:r},o)=>{const l=(jn(s)?hu:au)(n,r,o,s),u=Fc(n,typeof s=="string",t),c=s!==w.Fragment?{...u,...l,ref:i}:{},{children:h}=n,d=w.useMemo(()=>W(h)?h.get():h,[h]);return w.createElement(s,{...c,children:d})}}function ci(t){const e=[{},{}];return t==null||t.values.forEach((s,n)=>{e[0][n]=s.get(),e[1][n]=s.getVelocity()}),e}function Rn(t,e,s,n){if(typeof e=="function"){const[i,r]=ci(n);e=e(s!==void 0?s:t.custom,i,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,r]=ci(n);e=e(s!==void 0?s:t.custom,i,r)}return e}function Vt(t){return W(t)?t.get():t}function pu({scrapeMotionValuesFromProps:t,createRenderState:e},s,n,i){return{latestValues:mu(s,n,i,t),renderState:e()}}const So=t=>(e,s)=>{const n=w.useContext(Ht),i=w.useContext(sn),r=()=>pu(t,e,n,i);return s?r():Ua(r)};function mu(t,e,s,n){const i={},r=n(t,{});for(const d in r)i[d]=Vt(r[d]);let{initial:o,animate:a}=t;const l=Jt(t),u=po(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=s?s.initial===!1:!1;c=c||o===!1;const h=c?a:o;if(h&&typeof h!="boolean"&&!Gt(h)){const d=Array.isArray(h)?h:[h];for(let f=0;f<d.length;f++){const m=Rn(t,d[f]);if(m){const{transitionEnd:y,transition:v,...b}=m;for(const _ in b){let g=b[_];if(Array.isArray(g)){const x=c?g.length-1:0;g=g[x]}g!==null&&(i[_]=g)}for(const _ in y)i[_]=y[_]}}}return i}function On(t,e,s){var r;const{style:n}=t,i={};for(const o in n)(W(n[o])||e.style&&W(e.style[o])||vo(o,t)||((r=s==null?void 0:s.getValue(o))==null?void 0:r.liveStyle)!==void 0)&&(i[o]=n[o]);return i}const gu={useVisualState:So({scrapeMotionValuesFromProps:On,createRenderState:Cn})};function xo(t,e,s){const n=On(t,e,s);for(const i in t)if(W(t[i])||W(e[i])){const r=Xe.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}const yu={useVisualState:So({scrapeMotionValuesFromProps:xo,createRenderState:_o})};function vu(t,e){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...jn(n)?yu:gu,preloadedFeatures:t,useRender:fu(i),createVisualElement:e,Component:n};return Xc(o)}}function yt(t,e,s){const n=t.getProps();return Rn(n,e,s!==void 0?s:n.custom,t)}const $s=t=>Array.isArray(t);function bu(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,He(s))}function wu(t){return $s(t)?t[t.length-1]||0:t}function _u(t,e){const s=yt(t,e);let{transitionEnd:n={},transition:i={},...r}=s||{};r={...r,...n};for(const o in r){const a=wu(r[o]);bu(t,o,a)}}function Tu(t){return!!(W(t)&&t.add)}function Ns(t,e){const s=t.getValue("willChange");if(Tu(s))return s.add(e);if(!s&&he.WillChange){const n=new he.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function ko(t){return t.props[mo]}const Su=t=>t!==null;function xu(t,{repeat:e,repeatType:s="loop"},n){const i=t.filter(Su),r=e&&s!=="loop"&&e%2===1?0:i.length-1;return!r||n===void 0?i[r]:n}const ku={type:"spring",stiffness:500,damping:25,restSpeed:10},Pu=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Au={type:"keyframes",duration:.8},Eu={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Cu=(t,{keyframes:e})=>e.length>2?Au:Ze.has(t)?t.startsWith("scale")?Pu(e[1]):ku:Eu;function ju({when:t,delay:e,delayChildren:s,staggerChildren:n,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Dn=(t,e,s,n={},i,r)=>o=>{const a=_n(n,t)||{},l=a.delay||n.delay||0;let{elapsed:u=0}=n;u=u-ie(l);const c={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:d=>{e.set(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:r?void 0:i};ju(a)||Object.assign(c,Cu(t,c)),c.duration&&(c.duration=ie(c.duration)),c.repeatDelay&&(c.repeatDelay=ie(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let h=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(h=!0)),(he.instantAnimations||he.skipAnimations)&&(h=!0,c.duration=0,c.delay=0),c.allowFlatten=!a.type&&!a.ease,h&&!r&&e.get()!==void 0){const d=xu(c.keyframes,a);if(d!==void 0){I.update(()=>{c.onUpdate(d),c.onComplete()});return}}return a.isSync?new bn(c):new fc(c)};function Ru({protectedKeys:t,needsAnimating:e},s){const n=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,n}function Po(t,e,{delay:s=0,transitionOverride:n,type:i}={}){let{transition:r=t.getDefaultTransition(),transitionEnd:o,...a}=e;n&&(r=n);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const c in a){const h=t.getValue(c,t.latestValues[c]??null),d=a[c];if(d===void 0||u&&Ru(u,c))continue;const f={delay:s,..._n(r||{},c)},m=h.get();if(m!==void 0&&!h.isAnimating&&!Array.isArray(d)&&d===m&&!f.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const b=ko(t);if(b){const _=window.MotionHandoffAnimation(b,c,I);_!==null&&(f.startTime=_,y=!0)}}Ns(t,c),h.start(Dn(c,h,d,t.shouldReduceMotion&&eo.has(c)?{type:!1}:f,t,y));const v=h.animation;v&&l.push(v)}return o&&Promise.all(l).then(()=>{I.update(()=>{o&&_u(t,o)})}),l}function Us(t,e,s={}){var l;const n=yt(t,e,s.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(i=s.transitionOverride);const r=n?()=>Promise.all(Po(t,n,s)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:d}=i;return Ou(t,e,c+u,h,d,s)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,c]=a==="beforeChildren"?[r,o]:[o,r];return u().then(()=>c())}else return Promise.all([r(),o(s.delay)])}function Ou(t,e,s=0,n=0,i=1,r){const o=[],a=(t.variantChildren.size-1)*n,l=i===1?(u=0)=>u*n:(u=0)=>a-u*n;return Array.from(t.variantChildren).sort(Du).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(Us(u,e,{...r,delay:s+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function Du(t,e){return t.sortNodePosition(e)}function Iu(t,e,s={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(r=>Us(t,r,s));n=Promise.all(i)}else if(typeof e=="string")n=Us(t,e,s);else{const i=typeof e=="function"?yt(t,e,s.custom):e;n=Promise.all(Po(t,i,s))}return n.then(()=>{t.notify("AnimationComplete",e)})}function Ao(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}const Lu=Pn.length;function Eo(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?Eo(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<Lu;s++){const n=Pn[s],i=t.props[n];(mt(i)||i===!1)&&(e[n]=i)}return e}const Mu=[...kn].reverse(),Vu=kn.length;function $u(t){return e=>Promise.all(e.map(({animation:s,options:n})=>Iu(t,s,n)))}function Nu(t){let e=$u(t),s=ui(),n=!0;const i=l=>(u,c)=>{var d;const h=yt(t,c,l==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);if(h){const{transition:f,transitionEnd:m,...y}=h;u={...u,...y,...m}}return u};function r(l){e=l(t)}function o(l){const{props:u}=t,c=Eo(t.parent)||{},h=[],d=new Set;let f={},m=1/0;for(let v=0;v<Vu;v++){const b=Mu[v],_=s[b],g=u[b]!==void 0?u[b]:c[b],x=mt(g),T=b===l?_.isActive:null;T===!1&&(m=v);let S=g===c[b]&&g!==u[b]&&x;if(S&&n&&t.manuallyAnimateOnMount&&(S=!1),_.protectedKeys={...f},!_.isActive&&T===null||!g&&!_.prevProp||Gt(g)||typeof g=="boolean")continue;const P=Uu(_.prevProp,g);let k=P||b===l&&_.isActive&&!S&&x||v>m&&x,L=!1;const N=Array.isArray(g)?g:[g];let ae=N.reduce(i(b),{});T===!1&&(ae={});const{prevResolvedValues:_e={}}=_,ns={..._e,...ae},Te=B=>{k=!0,d.has(B)&&(L=!0,d.delete(B)),_.needsAnimating[B]=!0;const Y=t.getValue(B);Y&&(Y.liveStyle=!1)};for(const B in ns){const Y=ae[B],Et=_e[B];if(f.hasOwnProperty(B))continue;let is=!1;$s(Y)&&$s(Et)?is=!Ao(Y,Et):is=Y!==Et,is?Y!=null?Te(B):d.add(B):Y!==void 0&&d.has(B)?Te(B):_.protectedKeys[B]=!0}_.prevProp=g,_.prevResolvedValues=ae,_.isActive&&(f={...f,...ae}),n&&t.blockInitialAnimation&&(k=!1),k&&(!(S&&P)||L)&&h.push(...N.map(B=>({animation:B,options:{type:b}})))}if(d.size){const v={};if(typeof u.initial!="boolean"){const b=yt(t,Array.isArray(u.initial)?u.initial[0]:u.initial);b&&b.transition&&(v.transition=b.transition)}d.forEach(b=>{const _=t.getBaseTarget(b),g=t.getValue(b);g&&(g.liveStyle=!0),v[b]=_??null}),h.push({animation:v})}let y=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(y=!1),n=!1,y?e(h):Promise.resolve()}function a(l,u){var h;if(s[l].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(d=>{var f;return(f=d.animationState)==null?void 0:f.setActive(l,u)}),s[l].isActive=u;const c=o(l);for(const d in s)s[d].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>s,reset:()=>{s=ui(),n=!0}}}function Uu(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Ao(e,t):!1}function Se(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ui(){return{animate:Se(!0),whileInView:Se(),whileHover:Se(),whileTap:Se(),whileDrag:Se(),whileFocus:Se(),exit:Se()}}class be{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Bu extends be{constructor(e){super(e),e.animationState||(e.animationState=Nu(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gt(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Fu=0;class qu extends be{constructor(){super(...arguments),this.id=Fu++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);s&&!e&&i.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Ku={animation:{Feature:Bu},exit:{Feature:qu}};function vt(t,e,s,n={passive:!0}){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s)}function xt(t){return{point:{x:t.pageX,y:t.pageY}}}const Wu=t=>e=>xn(e)&&t(e,xt(e));function at(t,e,s,n){return vt(t,e,Wu(s),n)}function Co({top:t,left:e,right:s,bottom:n}){return{x:{min:e,max:s},y:{min:t,max:n}}}function zu({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Hu(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}const jo=1e-4,Gu=1-jo,Ju=1+jo,Ro=.01,Yu=0-Ro,Xu=0+Ro;function z(t){return t.max-t.min}function Zu(t,e,s){return Math.abs(t-e)<=s}function hi(t,e,s,n=.5){t.origin=n,t.originPoint=D(e.min,e.max,t.origin),t.scale=z(s)/z(e),t.translate=D(s.min,s.max,t.origin)-t.originPoint,(t.scale>=Gu&&t.scale<=Ju||isNaN(t.scale))&&(t.scale=1),(t.translate>=Yu&&t.translate<=Xu||isNaN(t.translate))&&(t.translate=0)}function lt(t,e,s,n){hi(t.x,e.x,s.x,n?n.originX:void 0),hi(t.y,e.y,s.y,n?n.originY:void 0)}function di(t,e,s){t.min=s.min+e.min,t.max=t.min+z(e)}function Qu(t,e,s){di(t.x,e.x,s.x),di(t.y,e.y,s.y)}function fi(t,e,s){t.min=e.min-s.min,t.max=t.min+z(e)}function ct(t,e,s){fi(t.x,e.x,s.x),fi(t.y,e.y,s.y)}const pi=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ke=()=>({x:pi(),y:pi()}),mi=()=>({min:0,max:0}),V=()=>({x:mi(),y:mi()});function Z(t){return[t("x"),t("y")]}function hs(t){return t===void 0||t===1}function Bs({scale:t,scaleX:e,scaleY:s}){return!hs(t)||!hs(e)||!hs(s)}function Ae(t){return Bs(t)||Oo(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Oo(t){return gi(t.x)||gi(t.y)}function gi(t){return t&&t!=="0%"}function Kt(t,e,s){const n=t-s,i=e*n;return s+i}function yi(t,e,s,n,i){return i!==void 0&&(t=Kt(t,i,n)),Kt(t,s,n)+e}function Fs(t,e=0,s=1,n,i){t.min=yi(t.min,e,s,n,i),t.max=yi(t.max,e,s,n,i)}function Do(t,{x:e,y:s}){Fs(t.x,e.translate,e.scale,e.originPoint),Fs(t.y,s.translate,s.scale,s.originPoint)}const vi=.999999999999,bi=1.0000000000001;function eh(t,e,s,n=!1){const i=s.length;if(!i)return;e.x=e.y=1;let r,o;for(let a=0;a<i;a++){r=s[a],o=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&ze(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Do(t,o)),n&&Ae(r.latestValues)&&ze(t,r.latestValues))}e.x<bi&&e.x>vi&&(e.x=1),e.y<bi&&e.y>vi&&(e.y=1)}function We(t,e){t.min=t.min+e,t.max=t.max+e}function wi(t,e,s,n,i=.5){const r=D(t.min,t.max,i);Fs(t,e,s,r,n)}function ze(t,e){wi(t.x,e.x,e.scaleX,e.scale,e.originX),wi(t.y,e.y,e.scaleY,e.scale,e.originY)}function Io(t,e){return Co(Hu(t.getBoundingClientRect(),e))}function th(t,e,s){const n=Io(t,s),{scroll:i}=e;return i&&(We(n.x,i.offset.x),We(n.y,i.offset.y)),n}const Lo=({current:t})=>t?t.ownerDocument.defaultView:null,_i=(t,e)=>Math.abs(t-e);function sh(t,e){const s=_i(t.x,e.x),n=_i(t.y,e.y);return Math.sqrt(s**2+n**2)}class Mo{constructor(e,s,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=fs(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,f=sh(h.offset,{x:0,y:0})>=3;if(!d&&!f)return;const{point:m}=h,{timestamp:y}=F;this.history.push({...m,timestamp:y});const{onStart:v,onMove:b}=this.handlers;d||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,d)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=ds(d,this.transformPagePoint),I.update(this.updatePoint,!0)},this.handlePointerUp=(h,d)=>{this.end();const{onEnd:f,onSessionEnd:m,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=fs(h.type==="pointercancel"?this.lastMoveEventInfo:ds(d,this.transformPagePoint),this.history);this.startEvent&&f&&f(h,v),m&&m(h,v)},!xn(e))return;this.dragSnapToOrigin=r,this.handlers=s,this.transformPagePoint=n,this.contextWindow=i||window;const o=xt(e),a=ds(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=F;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=s;c&&c(e,fs(a,this.history)),this.removeListeners=_t(at(this.contextWindow,"pointermove",this.handlePointerMove),at(this.contextWindow,"pointerup",this.handlePointerUp),at(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ye(this.updatePoint)}}function ds(t,e){return e?{point:e(t.point)}:t}function Ti(t,e){return{x:t.x-e.x,y:t.y-e.y}}function fs({point:t},e){return{point:t,delta:Ti(t,Vo(e)),offset:Ti(t,nh(e)),velocity:ih(e,.1)}}function nh(t){return t[0]}function Vo(t){return t[t.length-1]}function ih(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,n=null;const i=Vo(t);for(;s>=0&&(n=t[s],!(i.timestamp-n.timestamp>ie(e)));)s--;if(!n)return{x:0,y:0};const r=re(i.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const o={x:(i.x-n.x)/r,y:(i.y-n.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function rh(t,{min:e,max:s},n){return e!==void 0&&t<e?t=n?D(e,t,n.min):Math.max(t,e):s!==void 0&&t>s&&(t=n?D(s,t,n.max):Math.min(t,s)),t}function Si(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function oh(t,{top:e,left:s,bottom:n,right:i}){return{x:Si(t.x,s,i),y:Si(t.y,e,n)}}function xi(t,e){let s=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,n]=[n,s]),{min:s,max:n}}function ah(t,e){return{x:xi(t.x,e.x),y:xi(t.y,e.y)}}function lh(t,e){let s=.5;const n=z(t),i=z(e);return i>n?s=dt(e.min,e.max-n,t.min):n>i&&(s=dt(t.min,t.max-i,e.min)),ue(0,1,s)}function ch(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const qs=.35;function uh(t=qs){return t===!1?t=0:t===!0&&(t=qs),{x:ki(t,"left","right"),y:ki(t,"top","bottom")}}function ki(t,e,s){return{min:Pi(t,e),max:Pi(t,s)}}function Pi(t,e){return typeof t=="number"?t:t[e]||0}const hh=new WeakMap;class dh{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=V(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(xt(c).point)},r=(c,h)=>{const{drag:d,dragPropagation:f,onDragStart:m}=this.getProps();if(d&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Cc(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Z(v=>{let b=this.getAxisMotionValue(v).get()||0;if(oe.test(b)){const{projection:_}=this.visualElement;if(_&&_.layout){const g=_.layout.layoutBox[v];g&&(b=z(g)*(parseFloat(b)/100))}}this.originPoint[v]=b}),m&&I.postRender(()=>m(c,h)),Ns(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(c,h)=>{const{dragPropagation:d,dragDirectionLock:f,onDirectionLock:m,onDrag:y}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:v}=h;if(f&&this.currentDirection===null){this.currentDirection=fh(v),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),y&&y(c,h)},a=(c,h)=>this.stop(c,h),l=()=>Z(c=>{var h;return this.getAnimationState(c)==="paused"&&((h=this.getAxisMotionValue(c).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Mo(e,{onSessionStart:i,onStart:r,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Lo(this.visualElement)})}stop(e,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:r}=this.getProps();r&&I.postRender(()=>r(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,n){const{drag:i}=this.getProps();if(!n||!Rt(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=rh(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:s}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,i=this.constraints;e&&qe(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=oh(n.layoutBox,e):this.constraints=!1,this.elastic=uh(s),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Z(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=ch(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!qe(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=th(n,i.root,this.visualElement.getTransformPagePoint());let o=ah(i.layout.layoutBox,r);if(s){const a=s(zu(o));this.hasMutatedConstraints=!!a,a&&(o=Co(a))}return o}startAnimation(e){const{drag:s,dragMomentum:n,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Z(c=>{if(!Rt(c,s,this.currentDirection))return;let h=l&&l[c]||{};o&&(h={min:0,max:0});const d=i?200:1e6,f=i?40:1e7,m={type:"inertia",velocity:n?e[c]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...r,...h};return this.startAxisValueAnimation(c,m)});return Promise.all(u).then(a)}startAxisValueAnimation(e,s){const n=this.getAxisMotionValue(e);return Ns(this.visualElement,e),n.start(Dn(e,n,0,s,this.visualElement,!1))}stopAnimation(){Z(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Z(e=>{var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[s];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Z(s=>{const{drag:n}=this.getProps();if(!Rt(s,n,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(s);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[s];r.set(e[s]-D(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!qe(s)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Z(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=lh({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Z(o=>{if(!Rt(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(D(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;hh.set(this.visualElement,this);const e=this.visualElement.current,s=at(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();qe(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),I.read(n);const o=vt(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Z(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),s(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=qs,dragMomentum:a=!0}=e;return{...e,drag:s,dragDirectionLock:n,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function Rt(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function fh(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class ph extends be{constructor(e){super(e),this.removeGroupControls=Q,this.removeListeners=Q,this.controls=new dh(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Q}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ai=t=>(e,s)=>{t&&I.postRender(()=>t(e,s))};class mh extends be{constructor(){super(...arguments),this.removePointerDownListener=Q}onPointerDown(e){this.session=new Mo(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Lo(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Ai(e),onStart:Ai(s),onMove:n,onEnd:(r,o)=>{delete this.session,i&&I.postRender(()=>i(r,o))}}}mount(){this.removePointerDownListener=at(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const $t={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ei(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const tt={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(E.test(t))t=parseFloat(t);else return t;const s=Ei(t,e.target.x),n=Ei(t,e.target.y);return`${s}% ${n}%`}},gh={correct:(t,{treeScale:e,projectionDelta:s})=>{const n=t,i=ve.parse(t);if(i.length>5)return n;const r=ve.createTransformer(t),o=typeof i[0]!="number"?1:0,a=s.x.scale*e.x,l=s.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=D(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),r(i)}};class yh extends w.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n,layoutId:i}=this.props,{projection:r}=e;tu(vh),r&&(s.group&&s.group.add(r),n&&n.register&&i&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),$t.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:n,drag:i,isPresent:r}=this.props,{projection:o}=n;return o&&(o.isPresent=r,i||e.layoutDependency!==s||s===void 0||e.isPresent!==r?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||I.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Sn.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $o(t){const[e,s]=$c(),n=w.useContext(br);return p(yh,{...t,layoutGroup:n,switchLayoutGroup:w.useContext(go),isPresent:e,safeToRemove:s})}const vh={borderRadius:{...tt,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:tt,borderTopRightRadius:tt,borderBottomLeftRadius:tt,borderBottomRightRadius:tt,boxShadow:gh};function bh(t,e,s){const n=W(t)?t:He(t);return n.start(Dn("",n,e,s)),n.animation}const wh=(t,e)=>t.depth-e.depth;class _h{constructor(){this.children=[],this.isDirty=!1}add(e){nn(this.children,e),this.isDirty=!0}remove(e){rn(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(wh),this.isDirty=!1,this.children.forEach(e)}}function Th(t,e){const s=J.now(),n=({timestamp:i})=>{const r=i-s;r>=e&&(ye(n),t(r-e))};return I.setup(n,!0),()=>ye(n)}const No=["TopLeft","TopRight","BottomLeft","BottomRight"],Sh=No.length,Ci=t=>typeof t=="string"?parseFloat(t):t,ji=t=>typeof t=="number"||E.test(t);function xh(t,e,s,n,i,r){i?(t.opacity=D(0,s.opacity??1,kh(n)),t.opacityExit=D(e.opacity??1,0,Ph(n))):r&&(t.opacity=D(e.opacity??1,s.opacity??1,n));for(let o=0;o<Sh;o++){const a=`border${No[o]}Radius`;let l=Ri(e,a),u=Ri(s,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||ji(l)===ji(u)?(t[a]=Math.max(D(Ci(l),Ci(u),n),0),(oe.test(u)||oe.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||s.rotate)&&(t.rotate=D(e.rotate||0,s.rotate||0,n))}function Ri(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const kh=Uo(0,.5,jr),Ph=Uo(.5,.95,Q);function Uo(t,e,s){return n=>n<t?0:n>e?1:s(dt(t,e,n))}function Oi(t,e){t.min=e.min,t.max=e.max}function X(t,e){Oi(t.x,e.x),Oi(t.y,e.y)}function Di(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Ii(t,e,s,n,i){return t-=e,t=Kt(t,1/s,n),i!==void 0&&(t=Kt(t,1/i,n)),t}function Ah(t,e=0,s=1,n=.5,i,r=t,o=t){if(oe.test(e)&&(e=parseFloat(e),e=D(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=D(r.min,r.max,n);t===r&&(a-=e),t.min=Ii(t.min,e,s,a,i),t.max=Ii(t.max,e,s,a,i)}function Li(t,e,[s,n,i],r,o){Ah(t,e[s],e[n],e[i],e.scale,r,o)}const Eh=["x","scaleX","originX"],Ch=["y","scaleY","originY"];function Mi(t,e,s,n){Li(t.x,e,Eh,s?s.x:void 0,n?n.x:void 0),Li(t.y,e,Ch,s?s.y:void 0,n?n.y:void 0)}function Vi(t){return t.translate===0&&t.scale===1}function Bo(t){return Vi(t.x)&&Vi(t.y)}function $i(t,e){return t.min===e.min&&t.max===e.max}function jh(t,e){return $i(t.x,e.x)&&$i(t.y,e.y)}function Ni(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Fo(t,e){return Ni(t.x,e.x)&&Ni(t.y,e.y)}function Ui(t){return z(t.x)/z(t.y)}function Bi(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Rh{constructor(){this.members=[]}add(e){nn(this.members,e),e.scheduleRender()}remove(e){if(rn(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(i=>e===i);if(s===0)return!1;let n;for(let i=s;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){n=r;break}}return n?(this.promote(n),!0):!1}promote(e,s){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,s&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:n}=e;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Oh(t,e,s){let n="";const i=t.x.translate/e.x,r=t.y.translate/e.y,o=(s==null?void 0:s.z)||0;if((i||r||o)&&(n=`translate3d(${i}px, ${r}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:u,rotate:c,rotateX:h,rotateY:d,skewX:f,skewY:m}=s;u&&(n=`perspective(${u}px) ${n}`),c&&(n+=`rotate(${c}deg) `),h&&(n+=`rotateX(${h}deg) `),d&&(n+=`rotateY(${d}deg) `),f&&(n+=`skewX(${f}deg) `),m&&(n+=`skewY(${m}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const ps=["","X","Y","Z"],Dh={visibility:"hidden"},Ih=1e3;let Lh=0;function ms(t,e,s,n){const{latestValues:i}=e;i[t]&&(s[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function qo(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=ko(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",I,!(i||r))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&qo(n)}function Ko({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Lh++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach($h),this.nodes.forEach(qh),this.nodes.forEach(Kh),this.nodes.forEach(Nh)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new _h)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ln),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=co(o)&&!Lc(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let c;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,c&&c(),c=Th(h,250),$t.hasAnimatedSinceResize&&($t.hasAnimatedSinceResize=!1,this.nodes.forEach(qi))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:d,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||Jh,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),b=!this.targetLayout||!Fo(this.targetLayout,f),_=!h&&d;if(this.options.layoutRoot||this.resumeFrom||_||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const g={..._n(m,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(g.delay=0,g.type=!1),this.startAnimation(g),this.setAnimationOrigin(c,_)}else h||qi(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ye(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Wh),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qo(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Fi);return}this.isUpdating||this.nodes.forEach(Bh),this.isUpdating=!1,this.nodes.forEach(Fh),this.nodes.forEach(Mh),this.nodes.forEach(Vh),this.clearAllSnapshots();const a=J.now();F.delta=ue(0,1e3/60,a-F.timestamp),F.timestamp=a,F.isProcessing=!0,rs.update.process(F),rs.preRender.process(F),rs.render.process(F),F.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Sn.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Uh),this.sharedNodes.forEach(zh)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,I.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){I.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!z(this.snapshot.measuredBox.x)&&!z(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=V(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Bo(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Ae(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Yh(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return V();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(Xh))){const{scroll:c}=this.root;c&&(We(a.x,c.offset.x),We(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=V();if(X(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:d}=c;c!==this.root&&h&&d.layoutScroll&&(h.wasRoot&&X(a,o),We(a.x,h.offset.x),We(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=V();X(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ze(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Ae(c.latestValues)&&ze(l,c.latestValues)}return Ae(this.latestValues)&&ze(l,this.latestValues),l}removeTransform(o){const a=V();X(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ae(u.latestValues))continue;Bs(u.latestValues)&&u.updateSnapshot();const c=V(),h=u.measurePageBox();X(c,h),Mi(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Ae(this.latestValues)&&Mi(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==F.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var d;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(d=this.parent)!=null&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:h}=this.options;if(!(!this.layout||!(c||h))){if(this.resolvedRelativeTargetAt=F.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=V(),this.relativeTargetOrigin=V(),ct(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),X(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=V(),this.targetWithTransforms=V()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qu(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):X(this.target,this.layout.layoutBox),Do(this.target,this.targetDelta)):X(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=V(),this.relativeTargetOrigin=V(),ct(this.relativeTargetOrigin,this.target,f.target),X(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Bs(this.parent.latestValues)||Oo(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===F.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;X(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;eh(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=V());const{target:f}=o;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Di(this.prevProjectionDelta.x,this.projectionDelta.x),Di(this.prevProjectionDelta.y,this.projectionDelta.y)),lt(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!Bi(this.projectionDelta.x,this.prevProjectionDelta.x)||!Bi(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ke(),this.projectionDelta=Ke(),this.projectionDeltaWithTransform=Ke()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=Ke();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=V(),f=l?l.source:void 0,m=this.layout?this.layout.source:void 0,y=f!==m,v=this.getStack(),b=!v||v.members.length<=1,_=!!(y&&!b&&this.options.crossfade===!0&&!this.path.some(Gh));this.animationProgress=0;let g;this.mixTargetDelta=x=>{const T=x/1e3;Ki(h.x,o.x,T),Ki(h.y,o.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ct(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Hh(this.relativeTarget,this.relativeTargetOrigin,d,T),g&&jh(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=V()),X(g,this.relativeTarget)),y&&(this.animationValues=c,xh(c,u,this.latestValues,T,_,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(ye(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=I.update(()=>{$t.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=He(0)),this.currentAnimation=bh(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ih),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&Wo(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||V();const h=z(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const d=z(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}X(a,l),ze(a,c),lt(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Rh),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&ms("z",o,u,this.animationValues);for(let c=0;c<ps.length;c++)ms(`rotate${ps[c]}`,o,u,this.animationValues),ms(`skew${ps[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Dh;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=Vt(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=Vt(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ae(this.latestValues)&&(f.transform=l?l({},""):"none",this.hasProjected=!1),f}const c=u.animationValues||u.latestValues;this.applyTransformsToTarget(),a.transform=Oh(this.projectionDeltaWithTransform,this.treeScale,c),l&&(a.transform=l(c,a.transform));const{x:h,y:d}=this.projectionDelta;a.transformOrigin=`${h.origin*100}% ${d.origin*100}% 0`,u.animationValues?a.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:a.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const f in gt){if(c[f]===void 0)continue;const{correct:m,applyTo:y,isCSSVariable:v}=gt[f],b=a.transform==="none"?c[f]:m(c[f],u);if(y){const _=y.length;for(let g=0;g<_;g++)a[y[g]]=b}else v?this.options.visualElement.renderState.vars[f]=b:a[f]=b}return this.options.layoutId&&(a.pointerEvents=u===this?Vt(o==null?void 0:o.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Fi),this.root.sharedNodes.clear()}}}function Mh(t){t.updateLayout()}function Vh(t){var s;const e=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:r}=t.options,o=e.source!==t.layout.source;r==="size"?Z(h=>{const d=o?e.measuredBox[h]:e.layoutBox[h],f=z(d);d.min=n[h].min,d.max=d.min+f}):Wo(r,e.layoutBox,n)&&Z(h=>{const d=o?e.measuredBox[h]:e.layoutBox[h],f=z(n[h]);d.max=d.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+f)});const a=Ke();lt(a,n,e.layoutBox);const l=Ke();o?lt(l,t.applyTransform(i,!0),e.measuredBox):lt(l,n,e.layoutBox);const u=!Bo(a);let c=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:f}=h;if(d&&f){const m=V();ct(m,e.layoutBox,d.layoutBox);const y=V();ct(y,n,f.layoutBox),Fo(m,y)||(c=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=m,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function $h(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Nh(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Uh(t){t.clearSnapshot()}function Fi(t){t.clearMeasurements()}function Bh(t){t.isLayoutDirty=!1}function Fh(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function qi(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function qh(t){t.resolveTargetDelta()}function Kh(t){t.calcProjection()}function Wh(t){t.resetSkewAndRotation()}function zh(t){t.removeLeadSnapshot()}function Ki(t,e,s){t.translate=D(e.translate,0,s),t.scale=D(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function Wi(t,e,s,n){t.min=D(e.min,s.min,n),t.max=D(e.max,s.max,n)}function Hh(t,e,s,n){Wi(t.x,e.x,s.x,n),Wi(t.y,e.y,s.y,n)}function Gh(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Jh={duration:.45,ease:[.4,0,.1,1]},zi=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Hi=zi("applewebkit/")&&!zi("chrome/")?Math.round:Q;function Gi(t){t.min=Hi(t.min),t.max=Hi(t.max)}function Yh(t){Gi(t.x),Gi(t.y)}function Wo(t,e,s){return t==="position"||t==="preserve-aspect"&&!Zu(Ui(e),Ui(s),.2)}function Xh(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Zh=Ko({attachResizeListener:(t,e)=>vt(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),gs={current:void 0},zo=Ko({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!gs.current){const t=new Zh({});t.mount(window),t.setOptions({layoutScroll:!0}),gs.current=t}return gs.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Qh={pan:{Feature:mh},drag:{Feature:ph,ProjectionNode:zo,MeasureLayout:$o}};function Ji(t,e,s){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,r=n[i];r&&I.postRender(()=>r(e,xt(e)))}class ed extends be{mount(){const{current:e}=this.node;e&&(this.unmount=jc(e,(s,n)=>(Ji(this.node,n,"Start"),i=>Ji(this.node,i,"End"))))}unmount(){}}class td extends be{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_t(vt(this.node.current,"focus",()=>this.onFocus()),vt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yi(t,e,s){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),r=n[i];r&&I.postRender(()=>r(e,xt(e)))}class sd extends be{mount(){const{current:e}=this.node;e&&(this.unmount=Ic(e,(s,n)=>(Yi(this.node,n,"Start"),(i,{success:r})=>Yi(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ks=new WeakMap,ys=new WeakMap,nd=t=>{const e=Ks.get(t.target);e&&e(t)},id=t=>{t.forEach(nd)};function rd({root:t,...e}){const s=t||document;ys.has(s)||ys.set(s,{});const n=ys.get(s),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(id,{root:t,...e})),n[i]}function od(t,e,s){const n=rd(e);return Ks.set(t,s),n.observe(t),()=>{Ks.delete(t),n.unobserve(t)}}const ad={some:0,all:1};class ld extends be{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:n,amount:i="some",once:r}=e,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:ad[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),d=u?c:h;d&&d(l)};return od(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(cd(e,s))&&this.startObserver()}unmount(){}}function cd({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const ud={inView:{Feature:ld},tap:{Feature:sd},focus:{Feature:td},hover:{Feature:ed}},hd={layout:{ProjectionNode:zo,MeasureLayout:$o}},Ws={current:null},Ho={current:!1};function dd(){if(Ho.current=!0,!!tn)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ws.current=t.matches;t.addListener(e),e()}else Ws.current=!1}const fd=new WeakMap;function pd(t,e,s){for(const n in e){const i=e[n],r=s[n];if(W(i))t.addValue(n,i);else if(W(r))t.addValue(n,He(i,{owner:t}));else if(r!==i)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(n);t.addValue(n,He(o!==void 0?o:i,{owner:t}))}}for(const n in s)e[n]===void 0&&t.removeValue(n);return e}const Xi=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class md{scrapeMotionValuesFromProps(e,s,n){return{}}constructor({parent:e,props:s,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wn,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=J.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,I.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=s,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=Jt(s),this.isVariantNode=po(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(s,{},this);for(const d in h){const f=h[d];l[d]!==void 0&&W(f)&&f.set(l[d],!1)}}mount(e){this.current=e,fd.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),Ho.current||dd(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ws.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ye(this.notifyUpdate),ye(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Ze.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=s.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&I.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),r=s.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{i(),r(),o&&o(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ge){const s=Ge[e];if(!s)continue;const{isEnabled:n,Feature:i}=s;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):V()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<Xi.length;n++){const i=Xi[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,o=e[r];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=pd(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const n=this.values.get(e);s!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&s!==void 0&&(n=He(s===null?void 0:s,{owner:this}),this.addValue(e,n)),n}readValue(e,s){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(wr(n)||Tr(n))?n=parseFloat(n):!Vc(n)&&ve.test(s)&&(n=io(e,s)),this.setBaseTarget(e,W(n)?n.get():n)),W(n)?n.get():n}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var r;const{initial:s}=this.props;let n;if(typeof s=="string"||typeof s=="object"){const o=Rn(this.props,s,(r=this.presenceContext)==null?void 0:r.custom);o&&(n=o[e])}if(s&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!W(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new ln),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class Go extends md{constructor(){super(...arguments),this.KeyframeResolver=kc}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:n}){delete s[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;W(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function Jo(t,{style:e,vars:s},n,i){Object.assign(t.style,e,i&&i.getProjectionStyles(n));for(const r in s)t.style.setProperty(r,s[r])}function gd(t){return window.getComputedStyle(t)}class yd extends Go{constructor(){super(...arguments),this.type="html",this.renderInstance=Jo}readValueFromInstance(e,s){var n;if(Ze.has(s))return(n=this.projection)!=null&&n.isProjecting?Os(s):Kl(e,s);{const i=gd(e),r=(hn(s)?i.getPropertyValue(s):i[s])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:s}){return Io(e,s)}build(e,s,n){En(e,s,n.transformTemplate)}scrapeMotionValuesFromProps(e,s,n){return On(e,s,n)}}const Yo=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vd(t,e,s,n){Jo(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(Yo.has(i)?i:An(i),e.attrs[i])}class bd extends Go{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=V}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Ze.has(s)){const n=no(s);return n&&n.default||0}return s=Yo.has(s)?s:An(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,n){return xo(e,s,n)}build(e,s,n){wo(e,s,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,s,n,i){vd(e,s,n,i)}mount(e){this.isSVGTag=To(e.tagName),super.mount(e)}}const wd=(t,e)=>jn(t)?new bd(e):new yd(e,{allowProjection:t!==w.Fragment}),_d=vu({...Ku,...ud,...Qh,...hd},wd),Td=qc(_d),Sd=(t,e)=>{const s=new Set([...Object.keys(t),...e.flatMap(i=>Object.keys(i))]),n={};return s.forEach(i=>{n[i]=[t[i],...e.map(r=>r[i])]}),n},Xo=({text:t="",delay:e=200,className:s="",animateBy:n="words",direction:i="top",threshold:r=.1,rootMargin:o="0px",animationFrom:a,animationTo:l,easing:u=d=>d,onAnimationComplete:c,stepDuration:h=.35})=>{let d;n==="lines"?d=t.split(new RegExp("(?<=[.!?])\\s+|\\n")).filter(Boolean):n==="words"?d=t.split(" "):d=t.split("");const[f,m]=w.useState(!1),y=w.useRef(null);w.useEffect(()=>{if(!y.current)return;const P=new IntersectionObserver(([k])=>{k.isIntersecting&&(m(!0),P.unobserve(y.current))},{threshold:r,rootMargin:o});return P.observe(y.current),()=>P.disconnect()},[r,o]);const v=w.useMemo(()=>i==="top"?{filter:"blur(10px)",opacity:0,y:-50}:{filter:"blur(10px)",opacity:0,y:50},[i]),b=w.useMemo(()=>[{filter:"blur(5px)",opacity:.5,y:i==="top"?5:-5},{filter:"blur(0px)",opacity:1,y:0}],[i]),_=a??v,g=l??b,x=g.length+1,T=h*(x-1),S=Array.from({length:x},(P,k)=>x===1?0:k/(x-1));return p("p",{ref:y,className:s,style:{display:"flex",flexWrap:"wrap"},children:d.map((P,k)=>{const L=Sd(_,g),N={duration:T,times:S,delay:k*e/1e3};return N.ease=u,A(Td.span,{className:"inline-block will-change-[transform,filter,opacity]",initial:_,animate:f?L:_,transition:N,onAnimationComplete:k===d.length-1?c:void 0,style:n==="lines"?{display:"block",width:"100%"}:{},children:[P,n==="words"&&k<d.length-1&&" "]},k)})})};Xo.propTypes={text:R.string,delay:R.number,className:R.string,animateBy:R.oneOf(["words","characters"]),direction:R.oneOf(["top","bottom"]),threshold:R.number,rootMargin:R.string,animationFrom:R.object,animationTo:R.arrayOf(R.object),easing:R.func,onAnimationComplete:R.func,stepDuration:R.number};function Zo({logo:t,image:e,intro:s,title:n,message:i}){w.useState(0);const r=w.useRef(null),o=["Software Engineer","Web Developer","Software Developer"],[a,l]=w.useState(0),[u,c]=w.useState(""),[h,d]=w.useState(!0),f=70,m=1200;w.useEffect(()=>{let b;return h?u.length<o[a].length?b=setTimeout(()=>{c(o[a].slice(0,u.length+1))},f):b=setTimeout(()=>d(!1),m):u.length>0?b=setTimeout(()=>{c(o[a].slice(0,u.length-1))},30):(d(!0),l(_=>(_+1)%o.length)),()=>clearTimeout(b)},[u,h,a]);const y=b=>()=>{console.log(`${b} loaded successfully`)},v=b=>_=>{console.error(`${b} failed to load:`,_.target.src);const g=_.target.src.split("/").pop();_.target.src=`./images/${g}`};return A("div",{className:"about-container",ref:r,style:{position:"relative"},children:[A("header",{className:"about-header",children:[p("img",{src:t,alt:"Logo",className:"logo",loading:"eager",onLoad:y("Logo"),onError:v("Logo")}),A("div",{className:"circles-container",children:[p("div",{className:"circle circle-1"}),p("div",{className:"circle circle-2"}),p("div",{className:"circle circle-3"})]})]}),A("div",{className:"portfolio-header",children:[p("h1",{className:"portfolio-title",children:"WELCOME TO MY PORTFOLIO"}),p("hr",{className:"portfolio-hr"}),A("div",{className:"jonna-gradient-text",children:[p("span",{className:"jonna-i-am",children:"I am "}),p("span",{className:"jonna-j",children:"J"}),p("span",{className:"jonna-o-img-wrapper",children:p("img",{src:"images/nightme.png",alt:"Jonna",className:"jonna-o-img"})}),p("span",{className:"jonna-nna",children:"nna"})]}),p("div",{className:"jonna-type-btn-wrapper",children:A("button",{className:"jonna-type-btn",children:[p("span",{className:"jonna-type-static",children:"A "}),p("span",{className:"jonna-type-animated",children:u})]})})]}),p("section",{className:"about-content",style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:p("div",{className:"about-text",children:p("div",{className:"message-bg",children:p(Xo,{text:i,className:"message",delay:40,direction:"top",stepDuration:.3,animateBy:"words",style:{textAlign:"center",justifyContent:"center"}})})})})]})}Zo.propTypes={logo:R.string.isRequired,image:R.string.isRequired,title:R.string.isRequired,message:R.string.isRequired};function xd(){return p("section",{className:"skills-section",children:p("div",{className:"notable-skills-btn-wrapper",children:p("button",{className:"notable-skills-btn",children:p("span",{className:"notable-skills-gradient-text",children:"Notable Skills"})})})})}const kd=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>wt(()=>Promise.resolve().then(()=>Qe),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class In extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class Pd extends In{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Zi extends In{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Qi extends In{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zs;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(zs||(zs={}));var Ad=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};class Ed{constructor(e,{headers:s={},customFetch:n,region:i=zs.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=kd(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return Ad(this,void 0,void 0,function*(){try{const{headers:i,method:r,body:o}=s;let a={},{region:l}=s;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(y=>{throw new Pd(y)}),d=h.headers.get("x-relay-error");if(d&&d==="true")throw new Zi(h);if(!h.ok)throw new Qi(h);let f=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield h.json():f==="application/octet-stream"?m=yield h.blob():f==="text/event-stream"?m=h:f==="multipart/form-data"?m=yield h.formData():m=yield h.text(),{data:m,error:null,response:h}}catch(i){return{data:null,error:i,response:i instanceof Qi||i instanceof Zi?i.context:void 0}}})}}var G={},Ln={},Yt={},kt={},Xt={},Zt={},Cd=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Je=Cd();const jd=Je.fetch,Qo=Je.fetch.bind(Je),ea=Je.Headers,Rd=Je.Request,Od=Je.Response,Qe=Object.freeze(Object.defineProperty({__proto__:null,Headers:ea,Request:Rd,Response:Od,default:Qo,fetch:jd},Symbol.toStringTag,{value:"Module"})),Dd=Ia(Qe);var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});let Id=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Qt.default=Id;var ta=ee&&ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zt,"__esModule",{value:!0});const Ld=ta(Dd),Md=ta(Qt);let Vd=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Ld.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async r=>{var o,a,l;let u=null,c=null,h=null,d=r.status,f=r.statusText;if(r.ok){if(this.method!=="HEAD"){const b=await r.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=b:c=JSON.parse(b))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(a=r.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,d=406,f="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const y=await r.text();try{u=JSON.parse(y),Array.isArray(u)&&r.status===404&&(c=[],u=null,d=200,f="OK")}catch{r.status===404&&y===""?(d=204,f="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,d=200,f="OK"),u&&this.shouldThrowOnError)throw new Md.default(u)}return{error:u,data:c,count:h,status:d,statusText:f}});return this.shouldThrowOnError||(i=i.catch(r=>{var o,a,l;return{error:{message:`${(o=r==null?void 0:r.name)!==null&&o!==void 0?o:"FetchError"}: ${r==null?void 0:r.message}`,details:`${(a=r==null?void 0:r.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=r==null?void 0:r.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,s)}returns(){return this}overrideTypes(){return this}};Zt.default=Vd;var $d=ee&&ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xt,"__esModule",{value:!0});const Nd=$d(Zt);let Ud=class extends Nd.default{select(e){let s=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!s?"":(i==='"'&&(s=!s),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:i,referencedTable:r=i}={}){const o=r?`${r}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:i=n}={}){const r=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:i=!1,wal:r=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,s?"verbose":null,n?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Xt.default=Ud;var Bd=ee&&ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kt,"__esModule",{value:!0});const Fd=Bd(Xt);let qd=class extends Fd.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:i}={}){let r="";i==="plain"?r="pl":i==="phrase"?r="ph":i==="websearch"&&(r="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};kt.default=qd;var Kd=ee&&ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yt,"__esModule",{value:!0});const st=Kd(kt);let Wd=class{constructor(e,{headers:s={},schema:n,fetch:i}){this.url=e,this.headers=s,this.schema=n,this.fetch=i}select(e,{head:s=!1,count:n}={}){const i=s?"HEAD":"GET";let r=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new st.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const i="POST",r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new st.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:i,defaultToNull:r=!0}={}){const o="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new st.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),this.headers.Prefer=i.join(","),new st.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new st.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Yt.default=Wd;var es={},ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.version=void 0;ts.version="0.0.0-automated";Object.defineProperty(es,"__esModule",{value:!0});es.DEFAULT_HEADERS=void 0;const zd=ts;es.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${zd.version}`};var sa=ee&&ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ln,"__esModule",{value:!0});const Hd=sa(Yt),Gd=sa(kt),Jd=es;let Yd=class na{constructor(e,{headers:s={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Jd.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=i}from(e){const s=new URL(`${this.url}/${e}`);return new Hd.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new na(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:i=!1,count:r}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;n||i?(o=n?"HEAD":"GET",Object.entries(s).filter(([c,h])=>h!==void 0).map(([c,h])=>[c,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([c,h])=>{a.searchParams.append(c,h)})):(o="POST",l=s);const u=Object.assign({},this.headers);return r&&(u.Prefer=`count=${r}`),new Gd.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Ln.default=Yd;var et=ee&&ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(G,"__esModule",{value:!0});G.PostgrestError=G.PostgrestBuilder=G.PostgrestTransformBuilder=G.PostgrestFilterBuilder=G.PostgrestQueryBuilder=G.PostgrestClient=void 0;const ia=et(Ln);G.PostgrestClient=ia.default;const ra=et(Yt);G.PostgrestQueryBuilder=ra.default;const oa=et(kt);G.PostgrestFilterBuilder=oa.default;const aa=et(Xt);G.PostgrestTransformBuilder=aa.default;const la=et(Zt);G.PostgrestBuilder=la.default;const ca=et(Qt);G.PostgrestError=ca.default;var Xd=G.default={PostgrestClient:ia.default,PostgrestQueryBuilder:ra.default,PostgrestFilterBuilder:oa.default,PostgrestTransformBuilder:aa.default,PostgrestBuilder:la.default,PostgrestError:ca.default};const{PostgrestClient:Zd,PostgrestQueryBuilder:fm,PostgrestFilterBuilder:pm,PostgrestTransformBuilder:mm,PostgrestBuilder:gm,PostgrestError:ym}=Xd;function Qd(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const ef=Qd(),tf="2.11.15",sf=`realtime-js/${tf}`,nf="1.0.0",ua=1e4,rf=1e3;var ut;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ut||(ut={}));var K;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(K||(K={}));var ne;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ne||(ne={}));var Hs;(function(t){t.websocket="websocket"})(Hs||(Hs={}));var Ce;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ce||(Ce={}));class of{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const i=s.getUint8(1),r=s.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const l=n.decode(e.slice(o,o+r));o=o+r;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class ha{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var O;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(O||(O={}));const er=(t,e,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((r,o)=>(r[o]=af(o,t,e,i),r),{})},af=(t,e,s,n)=>{const i=e.find(a=>a.name===t),r=i==null?void 0:i.type,o=s[t];return r&&!n.includes(r)?da(r,o):Gs(o)},da=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return hf(e,s)}switch(t){case O.bool:return lf(e);case O.float4:case O.float8:case O.int2:case O.int4:case O.int8:case O.numeric:case O.oid:return cf(e);case O.json:case O.jsonb:return uf(e);case O.timestamp:return df(e);case O.abstime:case O.date:case O.daterange:case O.int4range:case O.int8range:case O.money:case O.reltime:case O.text:case O.time:case O.timestamptz:case O.timetz:case O.tsrange:case O.tstzrange:return Gs(e);default:return Gs(e)}},Gs=t=>t,lf=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},cf=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},uf=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},hf=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let r;const o=t.slice(1,s);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(a=>da(e,a))}return t},df=t=>typeof t=="string"?t.replace(" ","T"):t,fa=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class vs{constructor(e,s,n={},i=ua){this.channel=e,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tr;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(tr||(tr={}));class ht{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ht.syncState(this.state,i,r,o),this.pendingDiffs.forEach(l=>{this.state=ht.syncDiff(this.state,l,r,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ht.syncDiff(this.state,i,r,o),a())}),this.onJoin((i,r,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:o})}),this.onLeave((i,r,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,i){const r=this.cloneDeep(e),o=this.transformState(s),a={},l={};return this.map(r,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=r[u];if(h){const d=c.map(v=>v.presence_ref),f=h.map(v=>v.presence_ref),m=c.filter(v=>f.indexOf(v.presence_ref)<0),y=h.filter(v=>d.indexOf(v.presence_ref)<0);m.length>0&&(a[u]=m),y.length>0&&(l[u]=y)}else a[u]=c}),this.syncDiff(r,{joins:a,leaves:l},n,i)}static syncDiff(e,s,n,i){const{joins:r,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(r,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(f=>f.presence_ref),d=c.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}n(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const i=e[n];return"metas"in i?s[n]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):s[n]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sr;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(sr||(sr={}));var nr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(nr||(nr={}));var ce;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ce||(ce={}));class Mn{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=K.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new vs(this,ne.join,this.params,this.timeout),this.rejoinTimer=new ha(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=K.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=K.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=K.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=K.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ne.reply,{},(i,r)=>{this._trigger(this._replyEventName(r),i)}),this.presence=new ht(this),this.broadcastEndpointURL=fa(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==K.closed){const{config:{broadcast:r,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e(ce.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(ce.CLOSED));const l={},u={broadcast:r,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){e==null||e(ce.SUBSCRIBED);return}else{const d=this.bindings.postgres_changes,f=(h=d==null?void 0:d.length)!==null&&h!==void 0?h:0,m=[];for(let y=0;y<f;y++){const v=d[y],{filter:{event:b,schema:_,table:g,filter:x}}=v,T=c&&c[y];if(T&&T.event===b&&T.schema===_&&T.table===g&&T.filter===x)m.push(Object.assign(Object.assign({},v),{id:T.id}));else{this.unsubscribe(),this.state=K.errored,e==null||e(ce.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(ce.SUBSCRIBED);return}}).receive("error",c=>{this.state=K.errored,e==null||e(ce.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ce.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:r,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,a,l;const u=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&r("ok"),u.receive("ok",()=>r("ok")),u.receive("error",()=>r("error")),u.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=K.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ne.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new vs(this,ne.leave,{},e),n.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,n){const i=new AbortController,r=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(r),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new vs(this,e,s,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var i,r;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=ne;if(n&&[a,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let d=this._onMessage(o,s,n);if(s&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var m,y,v;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(y=f.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(f=>f.callback(d,n)):(r=this.bindings[o])===null||r===void 0||r.filter(f=>{var m,y,v,b,_,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const x=f.id,T=(m=f.filter)===null||m===void 0?void 0:m.event;return x&&((y=s.ids)===null||y===void 0?void 0:y.includes(x))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((v=s.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const x=(_=(b=f==null?void 0:f.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return x==="*"||x===((g=s==null?void 0:s.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const m=d.data,{schema:y,table:v,commit_timestamp:b,type:_,errors:g}=m;d=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:b,eventType:_,new:{},old:{},errors:g}),this._getPayloadRecords(m))}f.callback(d,n)})}_isClosed(){return this.state===K.closed}_isJoined(){return this.state===K.joined}_isJoining(){return this.state===K.joining}_isLeaving(){return this.state===K.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const i=e.toLocaleLowerCase(),r={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===n&&Mn.isEqual(i.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ne.close,{},e)}_onError(e){this._on(ne.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=K.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=er(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=er(e.columns,e.old_record)),s}}const ir=()=>{},ff=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class pf{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ua,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ir,this.ref=0,this.logger=ir,this.conn=null,this.sendBuffer=[],this.serializer=new of,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=r=>{let o;return r?o=r:typeof fetch>"u"?o=(...a)=>wt(()=>Promise.resolve().then(()=>Qe),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Hs.websocket}`,this.httpEndpoint=fa(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const i=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:r=>[1e3,2e3,5e3,1e4][r-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(r,o)=>o(JSON.stringify(r)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ha(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=ef),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:nf}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ut.connecting:return Ce.Connecting;case ut.open:return Ce.Open;case ut.closing:return Ce.Closing;default:return Ce.Closed}}isConnected(){return this.connectionState()===Ce.Open}channel(e,s={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(r=>r.topic===n);if(i)return i;{const r=new Mn(`realtime:${e}`,s,this);return this.channels.push(r),r}}push(e){const{topic:s,event:n,payload:i,ref:r}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${r})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const i={access_token:s,version:sf};s&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(ne.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(rf,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:i,payload:r,ref:o}=s;n==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,r),Array.from(this.channels).filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,r,o)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ne.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${n}${i}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([ff],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class Vn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function U(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class mf extends Vn{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Js extends Vn{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var gf=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};const pa=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>wt(()=>Promise.resolve().then(()=>Qe),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},yf=()=>gf(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wt(()=>Promise.resolve().then(()=>Qe),void 0)).Response:Response}),Ys=t=>{if(Array.isArray(t))return t.map(s=>Ys(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));e[i]=Ys(n)}),e};var Ie=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};const bs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),vf=(t,e,s)=>Ie(void 0,void 0,void 0,function*(){const n=yield yf();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(i=>{e(new mf(bs(i),t.status||500))}).catch(i=>{e(new Js(bs(i),i))}):e(new Js(bs(t),t))}),bf=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),s))};function Pt(t,e,s,n,i,r){return Ie(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,bf(e,n,i,r)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>vf(l,a,n))})})}function Wt(t,e,s,n){return Ie(this,void 0,void 0,function*(){return Pt(t,"GET",e,s,n)})}function me(t,e,s,n,i){return Ie(this,void 0,void 0,function*(){return Pt(t,"POST",e,n,i,s)})}function wf(t,e,s,n,i){return Ie(this,void 0,void 0,function*(){return Pt(t,"PUT",e,n,i,s)})}function _f(t,e,s,n){return Ie(this,void 0,void 0,function*(){return Pt(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function ma(t,e,s,n,i){return Ie(this,void 0,void 0,function*(){return Pt(t,"DELETE",e,n,i,s)})}var H=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};const Tf={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Sf{constructor(e,s={},n,i){this.url=e,this.headers=s,this.bucketId=n,this.fetch=pa(i)}uploadOrUpdate(e,s,n,i){return H(this,void 0,void 0,function*(){try{let r;const o=Object.assign(Object.assign({},rr),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",this.encodeMetadata(l)),r.append("",n)):typeof FormData<"u"&&n instanceof FormData?(r=n,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",this.encodeMetadata(l))):(r=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(s),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:r,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),d=yield h.json();return h.ok?{data:{path:u,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(r){if(U(r))return{data:null,error:r};throw r}})}upload(e,s,n){return H(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,i){return H(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),o=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let l;const u=Object.assign({upsert:rr.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),d=yield h.json();return h.ok?{data:{path:r,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(U(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return H(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);s!=null&&s.upsert&&(i["x-upsert"]="true");const r=yield me(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+r.url),a=o.searchParams.get("token");if(!a)throw new Vn("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}})}update(e,s,n){return H(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return H(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(U(i))return{data:null,error:i};throw i}})}copy(e,s,n){return H(this,void 0,void 0,function*(){try{return{data:{path:(yield me(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(U(i))return{data:null,error:i};throw i}})}createSignedUrl(e,s,n){return H(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),r=yield me(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(i){if(U(i))return{data:null,error:i};throw i}})}createSignedUrls(e,s,n){return H(this,void 0,void 0,function*(){try{const i=yield me(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),r=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${r}`):null})),error:null}}catch(i){if(U(i))return{data:null,error:i};throw i}})}download(e,s){return H(this,void 0,void 0,function*(){const i=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=r?`?${r}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Wt(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(U(a))return{data:null,error:a};throw a}})}info(e){return H(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield Wt(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Ys(n),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}})}exists(e){return H(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield _f(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(U(n)&&n instanceof Js){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),i=[],r=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";r!==""&&i.push(r);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return H(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}list(e,s,n){return H(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Tf),s),{prefix:e||""});return{data:yield me(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(U(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const xf="2.7.1",kf={"X-Client-Info":`storage-js/${xf}`};var Le=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};class Pf{constructor(e,s={},n){this.url=e,this.headers=Object.assign(Object.assign({},kf),s),this.fetch=pa(n)}listBuckets(){return Le(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(U(e))return{data:null,error:e};throw e}})}getBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Le(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Le(this,void 0,void 0,function*(){try{return{data:yield wf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Le(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}})}}class Af extends Pf{constructor(e,s={},n){super(e,s,n)}from(e){return new Sf(this.url,this.headers,e,this.fetch)}}const Ef="2.52.0";let it="";typeof Deno<"u"?it="deno":typeof document<"u"?it="web":typeof navigator<"u"&&navigator.product==="ReactNative"?it="react-native":it="node";const Cf={"X-Client-Info":`supabase-js-${it}/${Ef}`},jf={headers:Cf},Rf={schema:"public"},Of={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Df={};var If=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};const Lf=t=>{let e;return t?e=t:typeof fetch>"u"?e=Qo:e=fetch,(...s)=>e(...s)},Mf=()=>typeof Headers>"u"?ea:Headers,Vf=(t,e,s)=>{const n=Lf(s),i=Mf();return(r,o)=>If(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(r,Object.assign(Object.assign({},o),{headers:u}))})};var $f=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};function Nf(t){return t.endsWith("/")?t:t+"/"}function Uf(t,e){var s,n;const{db:i,auth:r,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:h}=e,d={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),r),realtime:Object.assign(Object.assign({},c),o),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>$f(this,void 0,void 0,function*(){return""})};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}const ga="2.71.1",Ue=30*1e3,Xs=3,ws=Xs*Ue,Bf="http://localhost:9999",Ff="supabase.auth.token",qf={"X-Client-Info":`gotrue-js/${ga}`},Zs="X-Supabase-Api-Version",ya={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Kf=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Wf=10*60*1e3;class $n extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function C(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class zf extends $n{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function Hf(t){return C(t)&&t.name==="AuthApiError"}class va extends $n{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class we extends $n{constructor(e,s,n,i){super(e,n,i),this.name=s,this.status=n}}class pe extends we{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Gf(t){return C(t)&&t.name==="AuthSessionMissingError"}class Ot extends we{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Dt extends we{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class It extends we{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Jf(t){return C(t)&&t.name==="AuthImplicitGrantRedirectError"}class or extends we{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qs extends we{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function _s(t){return C(t)&&t.name==="AuthRetryableFetchError"}class ar extends we{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class en extends we{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lr=` 	
\r=`.split(""),Yf=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<lr.length;e+=1)t[lr[e].charCodeAt(0)]=-2;for(let e=0;e<zt.length;e+=1)t[zt[e].charCodeAt(0)]=e;return t})();function cr(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(zt[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(zt[n]),e.queuedBits-=6}}function ba(t,e,s){const n=Yf[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function ur(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=o=>{Qf(o,n,s)};for(let o=0;o<t.length;o+=1)ba(t.charCodeAt(o),i,r);return e.join("")}function Xf(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Zf(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}Xf(n,e)}}function Qf(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function ep(t){const e=[],s={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)ba(t.charCodeAt(i),s,n);return new Uint8Array(e)}function tp(t){const e=[];return Zf(t,s=>e.push(s)),new Uint8Array(e)}function sp(t){const e=[],s={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>cr(i,s,n)),cr(null,s,n),e.join("")}function np(t){return Math.round(Date.now()/1e3)+t}function ip(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const te=()=>typeof window<"u"&&typeof document<"u",xe={tested:!1,writable:!1},wa=()=>{if(!te())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xe.tested)return xe.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),xe.tested=!0,xe.writable=!0}catch{xe.tested=!0,xe.writable=!1}return xe.writable};function rp(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,r)=>{e[r]=i})}catch{}return s.searchParams.forEach((n,i)=>{e[i]=n}),e}const _a=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>wt(()=>Promise.resolve().then(()=>Qe),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},op=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Be=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},ke=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},de=async(t,e)=>{await t.removeItem(e)};class ss{constructor(){this.promise=new ss.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}ss.promiseConstructor=Promise;function Ts(t){const e=t.split(".");if(e.length!==3)throw new en("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Kf.test(e[n]))throw new en("JWT not in base64url format");return{header:JSON.parse(ur(e[0])),payload:JSON.parse(ur(e[1])),signature:ep(e[2]),raw:{header:e[0],payload:e[1]}}}async function ap(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function lp(t,e){return new Promise((n,i)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await t(r);if(!e(r,null,o)){n(o);return}}catch(o){if(!e(r,o)){i(o);return}}})()})}function cp(t){return("0"+t.toString(16)).substr(-2)}function up(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let r=0;r<56;r++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,cp).join("")}async function hp(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(r=>String.fromCharCode(r)).join("")}async function dp(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await hp(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Me(t,e,s=!1){const n=up();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await Be(t,`${e}-code-verifier`,i);const r=await dp(n);return[r,n===r?"plain":"s256"]}const fp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pp(t){const e=t.headers.get(Zs);if(!e||!e.match(fp))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function mp(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function gp(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yp=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ve(t){if(!yp.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ss(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hr(t){return JSON.parse(JSON.stringify(t))}var vp=globalThis&&globalThis.__rest||function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};const Ee=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),bp=[502,503,504];async function dr(t){var e;if(!op(t))throw new Qs(Ee(t),0);if(bp.includes(t.status))throw new Qs(Ee(t),t.status);let s;try{s=await t.json()}catch(r){throw new va(Ee(r),r)}let n;const i=pp(t);if(i&&i.getTime()>=ya["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new ar(Ee(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new pe}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new ar(Ee(s),t.status,s.weak_password.reasons);throw new zf(Ee(s),t.status||500,n)}const wp=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function j(t,e,s,n){var i;const r=Object.assign({},n==null?void 0:n.headers);r[Zs]||(r[Zs]=ya["2024-01-01"].name),n!=null&&n.jwt&&(r.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await _p(t,e,s+a,{headers:r,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function _p(t,e,s,n,i,r){const o=wp(e,n,i,r);let a;try{a=await t(s,Object.assign({},o))}catch(l){throw console.error(l),new Qs(Ee(l),0)}if(a.ok||await dr(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await dr(l)}}function le(t){var e;let s=null;kp(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=np(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function fr(t){const e=le(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ge(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Tp(t){return{data:t,error:null}}function Sp(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:r}=t,o=vp(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:r},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function xp(t){return t}function kp(t){return t.access_token&&t.refresh_token&&t.expires_in}const xs=["global","local","others"];var Pp=globalThis&&globalThis.__rest||function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};class Ap{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=_a(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=xs[0]){if(xs.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xs.join(", ")}`);try{return await j(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(C(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await j(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:ge})}catch(n){if(C(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=Pp(e,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await j(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Sp,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(C(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await j(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ge})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,i,r,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await j(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(r=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:xp});if(c.error)throw c.error;const h=await c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(C(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ve(e);try{return await j(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ge})}catch(s){if(C(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Ve(e);try{return await j(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:ge})}catch(n){if(C(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){Ve(e);try{return await j(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:ge})}catch(n){if(C(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ve(e.userId);try{const{data:s,error:n}=await j(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(C(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Ve(e.userId),Ve(e.id);try{return{data:await j(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}}}function pr(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Ep(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $e={debug:!!(globalThis&&wa()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ta extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Cp extends Ta{}async function jp(t,e,s){$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),$e.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await s()}finally{$e.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw $e.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Cp(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if($e.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Ep();const Rp={url:Bf,storageKey:Ff,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qf,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mr(t,e,s){return await s()}const Ne={};class bt{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=bt.nextInstanceID,bt.nextInstanceID+=1,this.instanceID>0&&te()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Rp),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Ap({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=_a(i.fetch),this.lock=i.lock||mr,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:te()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=jp:this.lock=mr,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:wa()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=pr(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=pr(this.memoryStorage)),te()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Ne[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Ne[this.storageKey]=Object.assign(Object.assign({},Ne[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Ne[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ne[this.storageKey]=Object.assign(Object.assign({},Ne[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ga}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=rp(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),te()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:r}=await this._getSessionFromURL(s,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),Jf(r)){const l=(e=r.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return C(s)?{error:s}:{error:new va("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,i;try{const r=await j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:le}),{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(C(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(e){var s,n,i;try{let r;if("email"in e){const{email:c,password:h,options:d}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Me(this.storage,this.storageKey)),r=await j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:h,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:m},xform:le})}else if("phone"in e){const{phone:c,password:h,options:d}=e;r=await j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:le})}else throw new Dt("You must provide either an email or phone number and a password");const{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(C(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(e){try{let s;if("email"in e){const{email:r,password:o,options:a}=e;s=await j(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:fr})}else if("phone"in e){const{phone:r,password:o,options:a}=e;s=await j(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:fr})}else throw new Dt("You must provide either an email or phone number and a password");const{data:n,error:i}=s;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ot}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(s){if(C(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,i,r;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=e.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,i,r,o,a,l,u,c,h,d,f;let m,y;if("message"in e)m=e.message,y=e.signature;else{const{chain:v,wallet:b,statement:_,options:g}=e;let x;if(te())if(typeof b=="object")x=b;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))x=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=b}const T=new URL((s=g==null?void 0:g.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in x&&x.signIn){const S=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),_?{statement:_}:null));let P;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")P=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)P=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)m=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),y=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${T.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(i=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((r=g==null?void 0:g.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(c=g==null?void 0:g.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const S=await x.signMessage(new TextEncoder().encode(m),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:v,error:b}=await j(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:sp(y)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:le});if(b)throw b;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Ot}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:b})}catch(v){if(C(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const s=await ke(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(s??"").split("/");try{const{data:r,error:o}=await j(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:le});if(await de(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!r||!r.session||!r.user?{data:{user:null,session:null,redirectType:null},error:new Ot}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:i??null}),error:o})}catch(r){if(C(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(e){try{const{options:s,provider:n,token:i,access_token:r,nonce:o}=e,a=await j(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:le}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ot}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(s){if(C(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,i,r,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Me(this.storage,this.storageKey));const{error:h}=await j(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await j(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Dt("You must provide either an email or phone number.")}catch(a){if(C(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var s,n;try{let i,r;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,r=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await j(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:le});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var s,n,i;try{let r=null,o=null;return this.flowType==="pkce"&&([r,o]=await Me(this.storage,this.storageKey)),await j(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:o}),headers:this.headers,xform:Tp})}catch(r){if(C(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new pe;const{error:i}=await j(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(C(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:r}=e,{error:o}=await j(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},redirectTo:r==null?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:r}=e,{data:o,error:a}=await j(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Dt("You must provide either an email or phone number and a type")}catch(s){if(C(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await ke(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<ws:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await ke(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Ss()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await j(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ge}):await this._useSession(async s=>{var n,i,r;const{data:o,error:a}=s;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pe}:await j(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:ge})})}catch(s){if(C(s))return Gf(s)&&(await this._removeSession(),await de(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:i,error:r}=n;if(r)throw r;if(!i.session)throw new pe;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Me(this.storage,this.storageKey));const{data:u,error:c}=await j(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ge});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(C(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new pe;const s=Date.now()/1e3;let n=s,i=!0,r=null;const{payload:o}=Ts(e.access_token);if(o.exp&&(n=o.exp,i=n<=s),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};r=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;r={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(s){if(C(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new pe;const{session:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(C(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!te())throw new It("No browser detected.");if(e.error||e.error_description||e.error_code)throw new It(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new or("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new It("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new or("No code detected.");const{data:_,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:r,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!r||!a||!o||!u)throw new It("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let d=c+h;l&&(d=parseInt(l));const f=d-c;f*1e3<=Ue&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const m=d-h;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,d,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,d,c);const{data:y,error:v}=await this._getUser(r);if(v)throw v;const b={provider_token:n,provider_refresh_token:i,access_token:r,expires_in:h,expires_at:d,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(n){if(C(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await ke(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:r}=s;if(r)return{error:r};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Hf(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await de(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=ip(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,i;try{const{data:{session:r},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(r){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e,s={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Me(this.storage,this.storageKey,!0));try{return await j(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(r){if(C(r))return{data:null,error:r};throw r}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:i}=await this._useSession(async r=>{var o,a,l,u,c;const{data:h,error:d}=r;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await j(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return te()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(C(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,i;const{data:r,error:o}=s;if(o)throw o;return await j(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(C(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await lp(async i=>(i>0&&await ap(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await j(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:le})),(i,r)=>{const o=200*Math.pow(2,i);return r&&_s(r)&&Date.now()+o-n<Ue})}catch(n){if(this._debug(s,"error",n),C(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),te()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await ke(this.storage,this.storageKey);if(i&&this.userStorage){let o=await ke(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Be(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Ss()}else if(i&&!i.user&&!i.user){const o=await ke(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await de(this.storage,this.storageKey+"-user"),await Be(this.storage,this.storageKey,i)):i.user=Ss()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const r=((s=i.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<ws;if(this._debug(n,`session has${r?"":" not"} expired with margin of ${ws}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),_s(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new pe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ss;const{data:r,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!r.session)throw new pe;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const a={session:r.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(r){if(this._debug(i,"error",r),C(r)){const o={session:null,error:r};return _s(r)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,s,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){r.push(l)}});if(await Promise.all(o),r.length>0){for(let a=0;a<r.length;a+=1)console.error(r[a]);throw r[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await Be(this.userStorage,this.storageKey+"-user",{user:s.user});const i=Object.assign({},s);delete i.user;const r=hr(i);await Be(this.storage,this.storageKey,r)}else{const i=hr(s);await Be(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await de(this.storage,this.storageKey),await de(this.storage,this.storageKey+"-code-verifier"),await de(this.storage,this.storageKey+"-user"),this.userStorage&&await de(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&te()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ue);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Ue);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ue}ms, refresh threshold is ${Xs} ticks`),i<=Xs&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ta)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!te()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const i=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[r,o]=await Me(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const r=new URLSearchParams(n.queryParams);i.push(r.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:i,error:r}=s;return r?{data:null,error:r}:await j(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(C(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,i;const{data:r,error:o}=s;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await j(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(C(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:r}=s;if(r)return{data:null,error:r};const{data:o,error:a}=await j(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(s){if(C(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:r}=s;return r?{data:null,error:r}:await j(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(C(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),r=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:i},error:r}=e;if(r)return{data:null,error:r};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ts(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(s=i.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(a=>a.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+Wf>i)return n;const{data:r,error:o}=await j(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=i,n=r.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:f,error:m}=await this.getSession();if(m||!f.session)return{data:null,error:m};n=f.session.access_token}const{header:i,payload:r,signature:o,raw:{header:a,payload:l}}=Ts(n);s!=null&&s.allowExpired||mp(r.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!u){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:r,header:i,signature:o},error:null}}const c=gp(i.alg),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,tp(`${a}.${l}`)))throw new en("Invalid JWT signature");return{data:{claims:r,header:i,signature:o},error:null}}catch(n){if(C(n))return{data:null,error:n};throw n}}}bt.nextInstanceID=0;const Op=bt;class Dp extends Op{constructor(e){super(e)}}var Ip=globalThis&&globalThis.__awaiter||function(t,e,s,n){function i(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};class Lp{constructor(e,s,n){var i,r,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=Nf(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:Rf,realtime:Df,auth:Object.assign(Object.assign({},Of),{storageKey:u}),global:jf},h=Uf(n??{},c);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=h.global.headers)!==null&&r!==void 0?r:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Vf(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Zd(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Ed(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Af(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Ip(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:i,storageKey:r,flowType:o,lock:a,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dp({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:r,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:i,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new pf(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Mp=(t,e,s)=>new Lp(t,e,s),Vp="https://xpbxdixijhdbmsatnjhe.supabase.co",$p="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhwYnhkaXhpamhkYm1zYXRuamhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjIwMDUsImV4cCI6MjA2NzYzODAwNX0.9Tz9cSTd7EMyU48jObA7hx4GxehN-3Xt4vSXG8gPMR0",Nt=Mp(Vp,$p),Pe={overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},container:{background:"#fff",padding:"2rem",borderRadius:"12px",minWidth:"320px",boxShadow:"0 2px 16px rgba(0,0,0,0.15)",display:"flex",flexDirection:"column",alignItems:"center"},input:{padding:"0.5rem",fontSize:"1rem",borderRadius:"6px",border:"1px solid #ccc",marginBottom:"1rem",width:"100%"},button:{padding:"0.5rem 1.5rem",fontSize:"1rem",borderRadius:"6px",border:"none",background:"#4f46e5",color:"#fff",cursor:"pointer",marginBottom:"1rem"},message:{marginTop:"1rem",fontSize:"1rem",color:"#16a34a"},error:{marginTop:"1rem",fontSize:"1rem",color:"#dc2626"}},Np=({onClose:t})=>{const[e,s]=w.useState(""),[n,i]=w.useState(""),[r,o]=w.useState(""),[a,l]=w.useState(!1),u=async c=>{c.preventDefault(),i(""),o(""),l(!0);const{error:h}=await Nt.from("Projects").insert([{title:e}]);l(!1),h?o("Failed to insert: "+h.message):(i("Inserted successfully!"),s(""))};return p("div",{style:Pe.overlay,children:A("div",{style:Pe.container,children:[A("form",{onSubmit:u,style:{width:"100%"},children:[p("input",{type:"text",placeholder:"Enter title for Projects table",value:e,onChange:c=>s(c.target.value),style:Pe.input,required:!0,disabled:a}),p("button",{type:"submit",style:Pe.button,disabled:a,children:a?"Inserting...":"Insert"})]}),n&&p("div",{style:Pe.message,children:n}),r&&p("div",{style:Pe.error,children:r}),p("button",{onClick:t,style:{...Pe.button,background:"#aaa"},children:"Close"})]})})};function Sa({projects:t=[]}){const[e,s]=w.useState(!1),[n,i]=w.useState([!1,!1]),[r,o]=w.useState(!1),a=w.useRef(null);w.useEffect(()=>{const c=new IntersectionObserver(([h])=>{h.isIntersecting?s(!0):s(!1)},{threshold:.3,rootMargin:"0px 0px -100px 0px"});return a.current&&c.observe(a.current),()=>{a.current&&c.unobserve(a.current)}},[]);const l=c=>{i(h=>h.map((d,f)=>f===c?!0:d))},u=c=>{i(h=>h.map((d,f)=>f===c?!1:d))};return A("section",{className:"project-container",ref:a,style:{position:"relative",overflow:"hidden"},children:[r&&p(Np,{onClose:()=>o(!1)}),p("h1",{className:`project-title ${e?"animate":""}`,children:"Projects"}),A("div",{className:"project-grid",children:[A("div",{className:`project-card project-card-1 ${e?"animate":""} ${n[0]?"overlay-expanded no-border":""}`,style:{position:"relative"},children:[n[0]&&A("div",{className:"project-overlay show",children:[A("div",{className:"overlay-content",children:[p("h2",{className:"overlay-gradient-text",children:"Library Management System"}),p("p",{className:"overlay-description",children:"This desktop application is an exclusive platform with User, Librarian, and Admin interfaces. Users can borrow and reserve books, manage profiles, and view their activity history. Overdue books restrict access until payment is made. Librarians manage inventory, returns, payments, and reservations. Admins oversee user and librarian accounts, track earnings, and generate analytics on book usage and library operations."}),p("h3",{className:"overlay-gradient-text",children:"Tech Stack"}),p("div",{className:"tech-stack-circles-container",children:p("div",{className:"tech-stack-circles tech-stack-circles-1",children:["java.png","mysql.png","figma.png","github.png","git.png","vscode.png"].map((c,h)=>A("div",{className:"tech-item",children:[p("div",{className:"tech-circle tech-circle-1",children:p("img",{src:`/my-portfolio/images/${c}`,alt:c.split(".")[0],width:"36",height:"36",loading:"lazy",onLoad:d=>d.target.classList.add("loaded")})}),p("span",{className:"tech-label",children:c.split(".")[0].charAt(0).toUpperCase()+c.split(".")[0].slice(1)})]},c))})})]}),p("button",{className:"overlay-back-btn",onClick:()=>u(0),children:p("img",{src:"/my-portfolio/images/back.png",alt:"Back",className:"overlay-back-icon",width:"32",height:"32",loading:"lazy",onLoad:c=>c.target.classList.add("loaded")})})]}),p("div",{className:"card-upper-div",children:p("img",{src:"/my-portfolio/images/libit.png",alt:"Libit Project",className:"project-image",width:"120",height:"120",loading:"lazy",onLoad:c=>c.target.classList.add("loaded"),onError:c=>{console.error("Failed to load libit.png"),c.target.style.display="none"}})}),A("div",{className:"card-lower-div",style:{visibility:n[0]?"hidden":"visible"},children:[p("button",{className:"project-button left-button",onClick:()=>o(!0),children:p("img",{src:"/my-portfolio/images/play.png",alt:"Play",className:"button-icon",width:"24",height:"24",loading:"lazy",onLoad:c=>c.target.classList.add("loaded")})}),p("button",{className:"project-button right-button view-details-btn",onClick:()=>l(0),children:"View Details"})]})]}),A("div",{className:`project-card project-card-2 ${e?"animate":""} ${n[1]?"overlay-expanded no-border":""}`,style:{position:"relative"},children:[n[1]&&A("div",{className:"project-overlay show project-overlay-2",children:[A("div",{className:"overlay-content",children:[p("h2",{className:"overlay-gradient-text",children:"Inventory Management System"}),p("p",{className:"overlay-description",children:"This desktop application streamlines stock control and sales tracking for a medical company through a centralized platform for managing inventory. It allows users to add, edit, and delete products, manage stock levels, and track stock on hand and product off-take. Key features include activity logs, sales data visualization, and forecasting tools enabling informed decisions and improved operational efficiency."}),p("h3",{className:"overlay-gradient-text",children:"Tech Stack"}),p("div",{className:"tech-stack-circles-container",children:p("div",{className:"tech-stack-circles tech-stack-circles-2",children:["java.png","mysql.png","figma.png","github.png","git.png","intellij.png","scenebuilder.png"].map((c,h)=>A("div",{className:"tech-item",children:[p("div",{className:"tech-circle tech-circle-2",children:p("img",{src:`/my-portfolio/images/${c}`,alt:c.split(".")[0],width:"36",height:"36",loading:"lazy",onLoad:d=>d.target.classList.add("loaded")})}),p("span",{className:"tech-label",children:c.split(".")[0].charAt(0).toUpperCase()+c.split(".")[0].slice(1)})]},c))})})]}),p("button",{className:"overlay-back-btn",onClick:()=>u(1),children:p("img",{src:"/my-portfolio/images/back.png",alt:"Back",className:"overlay-back-icon",width:"32",height:"32",loading:"lazy",onLoad:c=>c.target.classList.add("loaded")})})]}),p("div",{className:"card-upper-div",children:p("img",{src:"/my-portfolio/images/intervein.png",alt:"Intervein Project",className:"project-image",width:"120",height:"120",loading:"lazy",onLoad:c=>c.target.classList.add("loaded"),onError:c=>{console.error("Failed to load intervein.png"),c.target.style.display="none"}})}),A("div",{className:"card-lower-div",style:{visibility:n[1]?"hidden":"visible"},children:[p("button",{className:"project-button left-button",children:p("img",{src:"/my-portfolio/images/play.png",alt:"Play",className:"button-icon",width:"24",height:"24",loading:"lazy",onLoad:c=>c.target.classList.add("loaded")})}),p("button",{className:"project-button right-button view-details-btn",onClick:()=>l(1),children:"View Details"})]})]})]})]})}Sa.propTypes={projects:R.arrayOf(R.shape({title:R.string.isRequired,description:R.string.isRequired,link:R.string,technologies:R.arrayOf(R.string)}))};const Up=({image:t,alt:e,title:s,expanded:n,onToggle:i,children:r})=>A("div",{className:`experience-card${n?" expanded":""}`,style:{position:"relative",zIndex:1},children:[A("div",{className:"experience-row",children:[p("img",{src:t,alt:e,className:"experience-icon"}),p("span",{className:"experience-title-text",children:s}),p("button",{className:"experience-dropdown-btn",onClick:i,children:p("img",{src:"images/dropdown.png",alt:"Dropdown",className:"experience-dropdown-icon",style:{transform:n?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"}})})]}),n&&p("div",{className:"experience-dropdown-row",children:r})]}),Bp=p("div",{className:"experience-dropdown-content",children:A("div",{style:{textAlign:"left",marginTop:"1.2rem"},children:[p("div",{children:"About Native Camp:"}),A("ul",{style:{marginTop:0,marginBottom:"1rem",paddingLeft:"1.2em"},children:[p("li",{children:"Innovative online platform for English language learning."}),p("li",{children:"Provides high-quality, accessible, and engaging education."}),p("li",{children:"Empowers students to achieve personal and professional language goals."})]}),p("div",{children:"Responsibilities as a Teacher:"}),A("ul",{style:{marginTop:0,paddingLeft:"1.2em"},children:[p("li",{children:"Conduct live, one-on-one English lessons."}),p("li",{children:"Use a variety of textbooks and learning materials provided by Native Camp."}),p("li",{children:"Engage in free conversation with students to entertain, build rapport, and encourage them to speak confidently."}),p("li",{children:"Provide constructive feedback and corrections to enhance students' language skills."}),p("li",{children:"Tailor lessons to suit individual learning styles and proficiency levels."}),p("li",{children:"Motivate students to practice regularly and provide supplementary resources for continued learning."})]})]})});function Fp(){const[t,e]=w.useState(!1),[s,n]=w.useState(!1),i=w.useRef(null),r=w.useRef(null),[o,a]=w.useState(0);return w.useEffect(()=>{const l=new window.IntersectionObserver(([u])=>{u.isIntersecting?e(!0):e(!1)},{threshold:.3,rootMargin:"0px 0px -100px 0px"});return i.current&&l.observe(i.current),()=>l.disconnect()},[]),w.useEffect(()=>{i.current&&a(i.current.offsetHeight)},[]),w.useMemo(()=>{function l(){const c=Math.random()<.5?[0,.38]:[.62,1];return`${(Math.random()*(c[1]-c[0])+c[0])*100}%`}function u(){return`${Math.random()*80+5}%`}return{saturn:{top:l(),left:u()},mars:{top:l(),left:u()}}},[o]),w.useEffect(()=>{s&&r.current&&r.current.scrollIntoView({behavior:"smooth",block:"center"})},[s]),A("section",{className:"experience-container",ref:i,style:{position:"relative",overflow:"hidden"},children:[p("h1",{className:`project-title ${t?"animate":""} experience-title-padding`,style:{position:"relative",zIndex:1},children:"Experience"}),p(Up,{image:"images/experience.png",alt:"Experience Icon",title:"English Teacher at Native Camp",expanded:s,onToggle:()=>n(l=>!l),children:Bp})]})}const qp=({children:t,degreeTitle:e,university:s,honor:n,isVisible:i})=>A("div",{className:`credentials-card${i?" visible":""}`,children:[A("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"1rem"},children:[p("img",{src:"images/degree.png",alt:"Degree",style:{width:"90px",height:"90px"}}),A("div",{style:{marginTop:"0.7rem",textAlign:"center",color:"white"},children:[p("div",{style:{fontWeight:"bold",fontSize:"12px"},children:e}),p("div",{style:{fontWeight:"normal",fontSize:"12px"},children:s}),p("div",{style:{fontWeight:"normal",fontSize:"12px"},children:n})]})]}),t]}),Kp=()=>{const[t,e]=w.useState(!1),s=w.useRef(null);return w.useEffect(()=>{const n=new window.IntersectionObserver(([i])=>{i.isIntersecting&&(e(!0),n.unobserve(i.target))},{threshold:.2});return s.current&&n.observe(s.current),()=>n.disconnect()},[]),A("section",{className:"credentials-container",ref:s,style:{position:"relative",overflow:"hidden",height:"auto",paddingLeft:"2rem",paddingRight:"2rem",paddingBottom:"2rem",paddingTop:0},children:[p("h1",{className:`project-title ${t?"animate":""}`,style:{position:"relative",zIndex:1,textAlign:"center",marginTop:"5rem",marginBottom:"2rem"},children:"Credentials"}),p(qp,{degreeTitle:"Bachelor of Science in Computer Engineering",university:"Cebu Technological University",honor:"Dean's Lister",isVisible:t,children:p("div",{className:"credentials-gradient-border",style:{maxWidth:"780px",minWidth:"360px",maxHeight:"110px",minHeight:"80px",margin:"0 auto",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center"}})})]})};const Wp=()=>{const[t,e]=w.useState(!1),s=w.useRef(null);return w.useEffect(()=>{const n=new window.IntersectionObserver(([i])=>{e(i.isIntersecting)},{threshold:.2});return s.current&&n.observe(s.current),()=>{s.current&&n.unobserve(s.current),n.disconnect()}},[]),p("section",{className:"contact-section",id:"contact",ref:s,children:A("div",{className:`contact-container-inner${t?" visible":""}`,children:[A("form",{className:`contact-form${t?" visible":""}`,children:[A("div",{className:`contact-inputs${t?" visible":""}`,children:[p("span",{className:`contact-gradient-title${t?" visible":""}`,children:"Send me a message"}),p("input",{type:"text",className:`contact-input name${t?" visible":""}`,placeholder:"Your Name",required:!0}),p("input",{type:"text",className:`contact-input company${t?" visible":""}`,placeholder:"Your Company"}),p("input",{type:"email",className:`contact-input email${t?" visible":""}`,placeholder:"Your Email",required:!0})]}),p("textarea",{className:`contact-textarea message${t?" visible":""}`,placeholder:"Your Message",required:!0})]}),A("div",{className:`contact-linkedin-footer${t?" visible":""}`,children:[p("span",{children:"Let's connect at "}),p("a",{href:"https://www.linkedin.com/in/silver-stein-8a015529a/",target:"_blank",rel:"noopener noreferrer",children:p("img",{src:"images/linkedIn.png",alt:"LinkedIn",style:{height:"40px",verticalAlign:"middle"}})})]})]})})};class At{constructor(e=0,s="Network Error"){this.status=e,this.text=s}}const zp=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},q={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:zp()},Nn=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},Hp=(t,e="https://api.emailjs.com")=>{if(!t)return;const s=Nn(t);q.publicKey=s.publicKey,q.blockHeadless=s.blockHeadless,q.storageProvider=s.storageProvider,q.blockList=s.blockList,q.limitRate=s.limitRate,q.origin=s.origin||e},xa=async(t,e,s={})=>{const n=await fetch(q.origin+t,{method:"POST",headers:s,body:e}),i=await n.text(),r=new At(n.status,i);if(n.ok)return r;throw r},ka=(t,e,s)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||typeof s!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Gp=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},Pa=t=>t.webdriver||!t.languages||t.languages.length===0,Aa=()=>new At(451,"Unavailable For Headless Browser"),Jp=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},Yp=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},Xp=(t,e)=>t instanceof FormData?t.get(e):t[e],Ea=(t,e)=>{if(Yp(t))return!1;Jp(t.list,t.watchVariable);const s=Xp(e,t.watchVariable);return typeof s!="string"?!1:t.list.includes(s)},Ca=()=>new At(403,"Forbidden"),Zp=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},Qp=async(t,e,s)=>{const n=Number(await s.get(t)||0);return e-Date.now()+n},ja=async(t,e,s)=>{if(!e.throttle||!s)return!1;Zp(e.throttle,e.id);const n=e.id||t;return await Qp(n,e.throttle,s)>0?!0:(await s.set(n,Date.now().toString()),!1)},Ra=()=>new At(429,"Too Many Requests"),em=async(t,e,s,n)=>{const i=Nn(n),r=i.publicKey||q.publicKey,o=i.blockHeadless||q.blockHeadless,a=i.storageProvider||q.storageProvider,l={...q.blockList,...i.blockList},u={...q.limitRate,...i.limitRate};return o&&Pa(navigator)?Promise.reject(Aa()):(ka(r,t,e),Gp(s),s&&Ea(l,s)?Promise.reject(Ca()):await ja(location.pathname,u,a)?Promise.reject(Ra()):xa("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:r,service_id:t,template_id:e,template_params:s}),{"Content-type":"application/json"}))},tm=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},sm=t=>typeof t=="string"?document.querySelector(t):t,nm=async(t,e,s,n)=>{const i=Nn(n),r=i.publicKey||q.publicKey,o=i.blockHeadless||q.blockHeadless,a=q.storageProvider||i.storageProvider,l={...q.blockList,...i.blockList},u={...q.limitRate,...i.limitRate};if(o&&Pa(navigator))return Promise.reject(Aa());const c=sm(s);ka(r,t,e),tm(c);const h=new FormData(c);return Ea(l,h)?Promise.reject(Ca()):await ja(location.pathname,u,a)?Promise.reject(Ra()):(h.append("lib_version","4.4.1"),h.append("service_id",t),h.append("template_id",e),h.append("user_id",r),xa("/api/v1.0/email/send-form",h))},ks={init:Hp,send:em,sendForm:nm,EmailJSResponseStatus:At};function im({onClose:t}){const[e,s]=w.useState(""),[n,i]=w.useState(""),[r,o]=w.useState(!1),[a,l]=w.useState(""),[u,c]=w.useState(""),[h,d]=w.useState(!1),[f,m]=w.useState(""),[y,v]=w.useState(""),[b,_]=w.useState(null),g=async S=>{S.preventDefault(),o(!0),l(""),c(""),console.log("Environment check:"),console.log("VITE_SUPABASE_URL:","https://xpbxdixijhdbmsatnjhe.supabase.co"),console.log("VITE_SUPABASE_ANON_KEY:","***"+"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhwYnhkaXhpamhkYm1zYXRuamhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjIwMDUsImV4cCI6MjA2NzYzODAwNX0.9Tz9cSTd7EMyU48jObA7hx4GxehN-3Xt4vSXG8gPMR0".slice(-4));try{console.log("Testing Supabase connection...");const{data:P,error:k}=await Nt.from("auth").select("*").limit(1);if(k){console.error("Supabase connection failed:",k),l(`Database connection failed: ${k.message}`),o(!1);return}console.log("Supabase connection successful!"),console.log("Test data:",P)}catch(P){console.error("Connection error:",P),l(`Connection error: ${P.message}`),o(!1);return}try{console.log("Attempting login with:",{email:e,password:n});const{data:P,error:k}=await Nt.from("auth").select("count").limit(1);if(k){console.error("Supabase connection test failed:",k),l(`Database connection failed: ${k.message}`),o(!1);return}console.log("Supabase connection successful"),console.log("Querying auth table with email:",e);const{data:L,error:N}=await Nt.from("auth").select("*").eq("email",e);if(console.log("Email check result:",L),N){console.error("Email check error:",N),l(`Email check failed: ${N.message}`),o(!1);return}if(!L||L.length===0){console.log("No user found with this email"),l("Invalid email or password"),o(!1);return}const ae=L[0];if(console.log("User found:",ae),ae.pass!==n){console.log("Password mismatch"),l("Invalid email or password"),o(!1);return}console.log("Credentials verified successfully!");const _e=Math.random().toString(36).substring(2,8).toUpperCase();v(_e);const ns=new Date(Date.now()+15*60*1e3);_(ns);try{console.log("EmailJS Environment Check:"),console.log("VITE_EMAILJS_PUBLIC_KEY:","***"+"IywptodCY-DUb36Pc".slice(-4)),console.log("VITE_EMAILJS_SERVICE_ID:","jtb_btj"),console.log("VITE_EMAILJS_TEMPLATE_ID:","template_l22mw5l");const Te="IywptodCY-DUb36Pc";ks.init(Te),console.log("EmailJS initialized successfully");const Un=new Date,B=new Date(Un.getTime()+15*60*1e3).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),Y={to_email:e,to_name:"Admin",passcode:_e,time:B,message:`Your authentication code is: ${_e}. This code will expire in 15 minutes.`};if(console.log("Sending email with params:",Y),console.log("Using Service ID:","jtb_btj"),console.log("Using Template ID:","template_l22mw5l"),(await ks.send("jtb_btj","template_l22mw5l",Y)).status===200)c(`Authentication code sent to ${e}. Please check your email and enter the code below.`),d(!0);else throw new Error("Email sending failed")}catch(Te){console.error("Email sending error:",Te),c(`Authentication code ${_e} sent to ${e}. Please check your email and enter the code below.`),d(!0)}}catch(P){console.error("Login error:",P),l("An error occurred during login")}finally{o(!1)}},x=async S=>{if(S.preventDefault(),o(!0),l(""),!f||f.trim()===""){l("Please enter the OTP code"),o(!1);return}if(b&&new Date>b){l("OTP has expired. Please request a new one."),o(!1);return}f.trim().toUpperCase()===y?(c("OTP verified successfully! Redirecting to admin panel..."),setTimeout(()=>{window.open("/admin","_blank"),window.close()},2e3)):l("Invalid OTP code. Please try again."),o(!1)},T=async()=>{o(!0),l("");const S=Math.random().toString(36).substring(2,8).toUpperCase();v(S);const P=new Date(Date.now()+15*60*1e3);_(P);try{const k={to_email:e,to_name:"Admin",passcode:S,time:P.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),message:`Your new authentication code is: ${S}. This code will expire in 15 minutes.`};if((await ks.send("jtb_btj","template_l22mw5l",k)).status===200)c("New authentication code sent! Please check your email."),m("");else throw new Error("Email sending failed")}catch(k){console.error("Email resend error:",k),c(`New authentication code: ${S}. Please check your email.`),m("")}o(!1)};return h?p("div",{className:"auth-container",children:p("div",{className:"auth-background",children:A("div",{className:"auth-form-container",children:[A("div",{className:"auth-header",children:[p("div",{className:"auth-header-row",children:p("button",{className:"auth-close-btn",onClick:t,type:"button",children:"×"})}),p("h1",{children:"OTP Verification"}),p("p",{children:"Enter the authentication code sent to your email"})]}),A("form",{onSubmit:x,className:"auth-form",children:[A("div",{className:"form-group",children:[p("label",{htmlFor:"otp",children:"Authentication Code"}),p("input",{type:"text",id:"otp",value:f,onChange:S=>m(S.target.value),placeholder:"Enter 6-digit code",maxLength:"6",required:!0,className:"auth-input",style:{textAlign:"center",letterSpacing:"0.5em",fontSize:"1.2em"}})]}),a&&p("div",{className:"error-message",children:a}),u&&p("div",{className:"success-message",children:u}),A("div",{className:"otp-actions",children:[p("button",{type:"submit",className:"login-btn",disabled:r,children:r?"Verifying...":"Verify OTP"}),p("button",{type:"button",className:"resend-btn",onClick:T,disabled:r,children:"Resend Code"})]}),A("div",{className:"otp-info",children:[A("p",{children:["Code expires in: ",b?Math.max(0,Math.floor((b-new Date)/1e3/60)):15," minutes"]}),p("p",{children:`Didn't receive the code? Check your spam folder or click "Resend Code"`})]})]})]})})}):p("div",{className:"auth-container",children:p("div",{className:"auth-background",children:A("div",{className:"auth-form-container",children:[A("div",{className:"auth-header",children:[p("div",{className:"auth-header-row",children:p("button",{className:"auth-close-btn",onClick:t,type:"button",children:"×"})}),p("h1",{children:"Admin Login"}),p("p",{children:"Enter your credentials to access the admin panel"})]}),A("form",{onSubmit:g,className:"auth-form",children:[A("div",{className:"form-group",children:[p("label",{htmlFor:"email",children:"Email"}),p("input",{type:"email",id:"email",value:e,onChange:S=>s(S.target.value),placeholder:"Enter your email",required:!0,className:"auth-input"})]}),A("div",{className:"form-group",children:[p("label",{htmlFor:"password",children:"Password"}),p("input",{type:"password",id:"password",value:n,onChange:S=>i(S.target.value),placeholder:"Enter your password",required:!0,className:"auth-input"})]}),a&&p("div",{className:"error-message",children:a}),u&&p("div",{className:"success-message",children:u}),p("button",{type:"submit",className:"login-btn",disabled:r,children:r?"Logging in...":"Log In"})]})]})})})}function vm(){const t="images/msJ.png",e="images/nightme.png",s=w.useRef(null),[n,i]=w.useState(!1),[r,o]=w.useState(!1);return w.useEffect(()=>{const a=new window.IntersectionObserver(([l])=>{l.isIntersecting&&(i(!0),a.unobserve(l.target))},{threshold:.2});return s.current&&a.observe(s.current),()=>a.disconnect()},[]),A("div",{className:"App",children:[r&&p("div",{className:"auth-overlay",children:p(im,{onClose:()=>o(!1)})}),A("div",{className:"main-container",children:[p("div",{className:"about-section",id:"about",children:p(Zo,{logo:t,image:e,title:"a Software Engineer skilled on",message:"I'm an enthusiastic and curious software and web developer with a passion for creating visually appealing, user-friendly websites and applications. I thrive on continuous learning and enjoy transforming ideas into impactful digital experiences. With strong time management and adaptability, I consistently deliver high-quality work on time. I'm driven by innovation and always eager to explore new trends, tools, and technologies to grow and refine my craft."})}),p("div",{className:"skills-section-wrapper",children:p(xd,{})}),p("div",{className:"project-section",id:"projects",children:p(Sa,{})}),p("div",{className:`experience-section${n?" show":""}`,ref:s,id:"experience",style:{opacity:n?1:0,transform:n?"translateY(0)":"translateY(60px)",transition:"opacity 0.8s cubic-bezier(0.4,0,0.2,1), transform 0.8s cubic-bezier(0.4,0,0.2,1)"},children:p(Fp,{})}),p("div",{className:"credentials-section",id:"credentials",children:p(Kp,{})}),p("div",{className:"contact-section-wrapper",children:p(Wp,{})}),p("footer",{className:"about-footer",children:p("button",{className:"footer-btn",style:{background:"transparent",color:"#fff",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.5rem 1.5rem",fontSize:"1rem",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>o(!0),children:"© ms J 2025"})})]})]})}export{vm as default};
