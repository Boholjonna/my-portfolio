import{r as o,j as L,F as B,a as r}from"./index-bd6fad43.js";const q={bottom:"2rem",right:"2rem"},N=10,_=22,y=14,O=4.5,I=6,z=2.2,T=3.2,j=1.5,G=5,J=({position:$=q,style:H={}})=>{const a=o.useRef(null),[u,S]=o.useState(!1),[Y,U]=o.useState({x:0,y:0}),[m,x]=o.useState(null),[E,A]=o.useState({x:0,y:0}),[l,h]=o.useState(!1),[k,F]=o.useState(null),[b,V]=o.useState(null),[P,M]=o.useState(!1);o.useEffect(()=>{function e(t){if(!a.current)return;const n=a.current.getBoundingClientRect(),s={x:n.left+n.width/2,y:n.top+n.height/2},f=t.touches?t.touches[0].clientX:t.clientX,v=t.touches?t.touches[0].clientY:t.clientY,d=f-s.x,c=v-s.y,g=Math.sqrt(d*d+c*c);let X=0,D=0;g>0&&(X=d/g,D=c/g),A({x:X*j,y:D*j})}return window.addEventListener("mousemove",e),window.addEventListener("touchmove",e),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",e)}},[]);const R=(e,t)=>{if(!a.current)return{x:e,y:t};const n=a.current.getBoundingClientRect(),s=n.width||64,f=n.height||64,v=0,d=0,c=window.innerWidth-s,g=window.innerHeight-f;return{x:Math.min(Math.max(e,v),c),y:Math.min(Math.max(t,d),g)}},C=e=>{if(l)return;e.preventDefault(),S(!0),M(!1);let t,n;e.touches?(t=e.touches[0].clientX,n=e.touches[0].clientY):(t=e.clientX,n=e.clientY),V({x:t,y:n});const s=a.current.getBoundingClientRect();U({x:t-s.left,y:n-s.top}),x({x:s.left,y:s.top}),document.body.style.userSelect="none"},w=e=>{if(!u)return;let t,n;if(e.touches?(t=e.touches[0].clientX,n=e.touches[0].clientY):(t=e.clientX,n=e.clientY),b&&!P){const d=t-b.x,c=n-b.y;Math.sqrt(d*d+c*c)>G&&M(!0)}let s=t-Y.x,f=n-Y.y;const v=R(s,f);x(v)},p=e=>{S(!1),document.body.style.userSelect=""};o.useEffect(()=>(u?(window.addEventListener("mousemove",w,{passive:!1}),window.addEventListener("mouseup",p),window.addEventListener("touchmove",w,{passive:!1}),window.addEventListener("touchend",p)):(window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",p),window.removeEventListener("touchmove",w),window.removeEventListener("touchend",p)),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",p),window.removeEventListener("touchmove",w),window.removeEventListener("touchend",p)}),[u]),o.useEffect(()=>{function e(){m&&!l&&x(t=>t&&R(t.x,t.y))}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[m,l]);const W=e=>{if(!P)if(l)h(!1),setTimeout(()=>{k&&x(k)},300);else{let t=m;if(!t&&a.current){const n=a.current.getBoundingClientRect();t={x:n.left,y:n.top}}F(t),h(!0)}};o.useEffect(()=>{if(!l)return;const e=()=>h(!1);return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[l]),o.useEffect(()=>{function e(t){t.preventDefault()}return u?(window.addEventListener("touchmove",e,{passive:!1}),window.addEventListener("wheel",e,{passive:!1})):(window.removeEventListener("touchmove",e),window.removeEventListener("wheel",e)),()=>{window.removeEventListener("touchmove",e),window.removeEventListener("wheel",e)}},[u]);let i={position:"fixed",zIndex:9999,cursor:l?"pointer":u?"grabbing":"grab",...H};if(l){const e=a.current?a.current.offsetWidth:64;i.left=`calc(50vw - ${e/2}px)`,i.top=`calc(50vh - ${e/2}px)`,i.right="auto",i.bottom="auto",i.transition="left 0.4s cubic-bezier(.4,1.6,.4,1), top 0.4s cubic-bezier(.4,1.6,.4,1)"}else m?(i.left=m.x+"px",i.top=m.y+"px",i.right="auto",i.bottom="auto",i.transition=u?"none":void 0):(Object.assign(i,$),i.transition=void 0);return L(B,{children:[l&&L(B,{children:[r("div",{className:"spark-ball-overlay",onClick:()=>h(!1)}),r("div",{className:"spark-ball-options",children:[{label:"About",angle:-90,id:"about"},{label:"Projects",angle:-18,id:"projects"},{label:"Experience",angle:45,id:"experience"},{label:"Credentials",angle:135,id:"credentials"},{label:"Contact",angle:198,id:"contact"}].map((e,t)=>{const s=e.angle*Math.PI/180,f=Math.cos(s)*110,v=Math.sin(s)*110,d=()=>{const c=document.getElementById(e.id);c?(c.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>h(!1),250)):h(!1)};return r("div",{className:"spark-option",style:{left:`calc(50% + ${f}px)`,top:`calc(50% + ${v}px)`},children:r("span",{className:"spark-option-label",onClick:d,children:e.label})},e.label)})})]}),r("button",{className:"spark-ball-btn",style:i,"aria-label":"Spark Ball Button",ref:a,onMouseDown:l?void 0:C,onTouchStart:l?void 0:C,onClick:W,tabIndex:0,children:r("span",{className:`spark-ball${u?" dragging":""}`,children:r("span",{className:"spark-face",children:L("svg",{width:"32",height:"32",viewBox:"0 0 32 32",className:"face-svg",children:[r("ellipse",{className:"eye left-eye",cx:N,cy:y,rx:O,ry:I,fill:"#fff"}),r("ellipse",{className:"eye right-eye",cx:_,cy:y,rx:O,ry:I,fill:"#fff"}),r("ellipse",{className:"pupil left-pupil",cx:N+E.x,cy:y+1+E.y,rx:z,ry:T,fill:"#000"}),r("ellipse",{className:"pupil right-pupil",cx:_+E.x,cy:y+1+E.y,rx:z,ry:T,fill:"#000"}),r("path",{className:"smile",d:"M12 20 Q16 25 20 20",stroke:"#fff",strokeWidth:"2",fill:"none"})]})})})})]})};export{J as default};
